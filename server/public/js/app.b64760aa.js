(function(e){function t(t){for(var a,s,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"49dc":function(e,t,n){},"560b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("5f5b"),o=n("99d1"),s=n("8c4f"),i=n("3717"),c=n.n(i),l=n("998c"),u=n.n(l),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("MasterLayout")],1)},p=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-navbar",{staticClass:"py-1",attrs:{toggleable:"lg",type:"light",variant:"light"}},[a("b-navbar-brand",{attrs:{href:"#"}},[e._v(" MongoZap "),a("img",{staticStyle:{height:"1.4em"},attrs:{alt:"Vue logo",src:n("770a")}})]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{href:"#"}},[a("router-link",{attrs:{to:"/"}},[e._v("Connections")])],1),a("b-nav-item",{attrs:{href:"#"}},[a("router-link",{attrs:{to:"/db/0/list"}},[e._v("Databases")])],1),a("b-nav-item",{attrs:{href:"#"}},[a("router-link",{attrs:{to:"/settings"}},[e._v("Settings")])],1)],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{attrs:{href:"https://github.com/svamja/mongozap",target:"_blank"}},[a("img",{staticStyle:{height:"1.4em"},attrs:{alt:"Vue logo",src:n("e02c")}})])],1)],1)],1),a("div",{staticClass:"content-wrapper"},[a("router-view")],1),e._m(0)],1)},v=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"mt-3 mb-1 small"},[e._v("Made with "),n("span",{staticStyle:{color:"#e25555"}},[e._v("â™¥")]),e._v(" in India")])])])])}],h=(n("96cf"),n("1da1")),f={data:function(){return{connection:"",database:"",collection:""}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connection=e.$route.params.connection,e.database=e.$route.params.database;case 2:case"end":return t.stop()}}),t)})))()}},b=f,_=(n("c0cc"),n("2877")),g=Object(_["a"])(b,m,v,!1,null,null,null),w=g.exports,x={name:"App",components:{MasterLayout:w}},y=x,C=Object(_["a"])(y,d,p,!1,null,null,null),k=C.exports,S=(n("560b"),n("a821"),n("a3b2"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"container"},[n("div",{staticClass:"row my-3"},[n("div",{staticClass:"col h4"},[e._v(" Connections "),n("span",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["shift","+"],expression:"[ 'shift', '+' ]"},{name:"b-modal",rawName:"v-b-modal.add-connection-modal",modifiers:{"add-connection-modal":!0}}],staticClass:"fa fa-plus ml-3 text-primary",on:{shortkey:function(t){e.showAddModal=!0}}})]),n("div",{staticClass:"col text-right"},[n("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["shift","?"],expression:"['shift', '?']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{href:"#",title:"Keyboard Shortcuts (?)"},on:{shortkey:function(t){return e.openShortcuts()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.openShortcuts()}}},[n("span",{staticClass:"fa fa-question-circle"})])])])]),n("div",{staticClass:"container table-container"},[n("div",{staticClass:"row py-2 h4"},[n("div",{staticClass:"col"},[n("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["1"],expression:"['1']"}],on:{shortkey:function(t){return e.selectDb(0)}}},[e._v(" 1. "),n("router-link",{attrs:{to:"/db/0/list"}},[e._v(" Default ")])],1),n("div",{staticClass:"small text-muted ml-4"},[e._v(" "+e._s(e.serverSettings.default_connection)+" ")])])]),e._l(e.connections,(function(t,a){return n("div",{key:t.url,staticClass:"row py-2 h4"},[n("div",{staticClass:"col"},[n("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:[a+2],expression:"[ index + 2 ]"}],on:{shortkey:function(t){return e.selectDb(a+1)}}},[e._v(" "+e._s(a+2)+". "),n("router-link",{attrs:{to:"/db/"+(a+1)+"/list"}},[e._v(" "+e._s(t.name)+" ")])],1),n("div",{staticClass:"small text-muted ml-4"},[e._v(" "+e._s(t.url)+" ")])]),n("div",{staticClass:"col text-center"},[n("span",{staticClass:"text-warning fa fa-trash",on:{click:function(t){return e.deleteConfirmation(a)}}})])])}))],2),n("b-modal",{attrs:{id:"add-connection-modal",title:"Add Connection"},on:{ok:function(t){return e.addConnection()}},model:{value:e.showAddModal,callback:function(t){e.showAddModal=t},expression:"showAddModal"}},[n("div",[n("b-form-input",{attrs:{placeholder:"Name",autofocus:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("div",{staticClass:"my-3"},[n("b-form-input",{attrs:{placeholder:"URL"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1)]),n("b-modal",{attrs:{id:"delete-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Delete Connection"},on:{ok:function(t){return e.deleteConnection()}},model:{value:e.showDeleteModal,callback:function(t){e.showDeleteModal=t},expression:"showDeleteModal"}},[n("p",[e._v(" This will simply delete the connection. It will not delete any underlying data. "),n("br"),e._v(" You can add the connection again and view the data. ")]),n("p",[e._v("Proceed?")])]),n("b-modal",{attrs:{id:"shortcuts-modal",title:"Keyboard Shortcuts","ok-only":""},model:{value:e.showShortcutsModal,callback:function(t){e.showShortcutsModal=t},expression:"showShortcutsModal"}},[n("table",{staticClass:"table table-bordered"},[n("tbody",[n("tr",[n("td",[e._v("+")]),n("td",[e._v("Add Connection")])]),n("tr",[n("td",[e._v("1")]),n("td",[e._v("Connection 1")])]),n("tr",[n("td",[e._v("2")]),n("td",[e._v("Connection 2")])]),n("tr",[n("td",[e._v(".")]),n("td",[e._v("..")])])])])])],1)}),R=[],O=(n("a434"),n("b0c0"),n("d4ec")),j=n("bee2"),D=n("bc3a"),M=n.n(D),N=n("2ef0"),I=n.n(N),$="api",E=function(){function e(){Object(O["a"])(this,e)}return Object(j["a"])(e,null,[{key:"api_call",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,o,s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=i.length>2&&void 0!==i[2]?i[2]:{},!a.connection_id){e.next=6;break}return e.next=4,z.connection(a.connection_id);case 4:a.connection_url=e.sent,delete a.connection_id;case 6:if(o=$+n,"get"!=t){e.next=14;break}return s={params:a},e.next=11,M.a.get(o,s);case 11:r=e.sent,e.next=24;break;case 14:if("post"!=t){e.next=20;break}return e.next=17,M.a.post(o,a);case 17:r=e.sent,e.next=24;break;case 20:if("delete"!=t){e.next=24;break}return e.next=23,M.a.delete(o,{data:a});case 23:r=e.sent;case 24:return e.abrupt("return",r);case 25:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"databases",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/databases",{connection_id:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"collections",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/collections",{connection_id:t,db:n});case 2:return a=e.sent,r=a.data,r=I.a.sortBy(r,["name"]),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"records",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var o,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o={connection_id:t,db:n,coll:a},r&&(r.currentPage&&(o.page=r.currentPage-1),r.perPage&&(o.perPage=r.perPage),r.query&&(o.query=JSON.stringify(r.query)),r.sortBy&&(s=1,r.sortDesc&&(s=-1),o.sort={},o.sort[r.sortBy]=s)),e.next=4,this.api_call("post","/collection/index",o);case 4:return i=e.sent,c=i.data,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/collection/clear",{connection_id:t,db:n,coll:a});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"drop",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/collection/drop",{connection_id:t,db:n,coll:a});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"loadSchema",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/collection/schema",{connection_id:t,db:n,coll:a});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"rebuildSchema",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=!0,e.next=3,this.api_call("get","/collection/schema",{connection_id:t,db:n,coll:a,rebuild:r});case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"bulkOps",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/collection/bulk",{connection_id:t,db:n,coll:a,ops:r});case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"getIndexes",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/collection/indexes",{connection_id:t,db:n,coll:a});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"deleteIndex",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("delete","/collection/indexes",{connection_id:t,db:n,coll:a,index_name:r});case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"getServerSettings",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/settings/get");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setServerSettings",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/settings/set",{settings:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetchDbInfo",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/db/info",{connection_id:t,db:n});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"insertDoc",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/collection/insert",{connection_id:t,db:n,coll:a,doc:r});case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"deleteRecords",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,a,r){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/collection/delete",{connection_id:t,db:n,coll:a,query:r});case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()}]),e}(),P=E,q={serverSettings:{},get:function(e){var t={collection_display:"model_name"},n=a["default"].$storage.get(e);return n=n||t[e],n},set:function(e,t){a["default"].$storage.set(e,t)},getServerSettings:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.getServerSettings();case 2:return e.serverSettings=t.sent,t.abrupt("return",e.serverSettings);case 4:case"end":return t.stop()}}),t)})))()},setServerSettings:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,P.setServerSettings(e);case 2:t.serverSettings=n.sent;case 3:case"end":return n.stop()}}),n)})))()},setConnections:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.serverSettings.connections=e,n.next=3,t.setServerSettings(t.serverSettings);case 3:t.serverSettings=n.sent;case 4:case"end":return n.stop()}}),n)})))()},getConnections:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getServerSettings();case 2:return e.serverSettings=t.sent,t.abrupt("return",e.serverSettings["connections"]||[]);case 4:case"end":return t.stop()}}),t)})))()},connection:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.serverSettings.default_connection){n.next=3;break}return n.next=3,t.getServerSettings();case 3:if(0!=e){n.next=7;break}return n.abrupt("return",t.serverSettings.default_connection);case 7:return n.abrupt("return",t.serverSettings.connections[e-1].url);case 8:case"end":return n.stop()}}),n)})))()}},z=q,T={data:function(){return{serverSettings:{},connections:[],name:"",url:"",deleteIndex:-1,showDeleteModal:!1,showAddModal:!1,showShortcutsModal:!1}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.getConnections();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:return e.connections=t.t0,t.next=8,z.getServerSettings();case 8:e.serverSettings=t.sent;case 9:case"end":return t.stop()}}),t)})))()},methods:{addConnection:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.url){t.next=6;break}return e.connections.push({name:e.name||e.url,url:e.url}),t.next=4,z.setConnections(e.connections);case 4:e.name="",e.url="";case 6:case"end":return t.stop()}}),t)})))()},deleteConfirmation:function(e){this.deleteIndex=e,this.showDeleteModal=!0},deleteConnection:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.deleteIndex>-1)){t.next=5;break}return e.connections.splice(e.deleteIndex,1),t.next=4,z.setConnections(e.connections);case 4:e.deleteIndex=-1;case 5:case"end":return t.stop()}}),t)})))()},selectDb:function(e){this.$router.push("/db/"+e+"/list")},openShortcuts:function(){this.showShortcutsModal=!0}}},B=T,A=Object(_["a"])(B,S,R,!1,null,"4de1ce34",null),J=A.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-button",{staticClass:"ml-0 pl-0",attrs:{variant:"link",to:"/db/"+e.connection+"/list"}},[e._v("Databases")])],1)]),n("div",{staticClass:"row my-2"},[n("div",{staticClass:"col"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.endSearch(t)}}},[n("b-form-input",{attrs:{placeholder:"Search",autofocus:""},model:{value:e.search_text,callback:function(t){e.search_text=t},expression:"search_text"}})],1)])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},e._l(e.filtered_databases,(function(t){return n("div",{key:t.name},[n("router-link",{attrs:{to:"/db/"+e.connection+"/"+t.name+"/index"}},[e._v(" "+e._s(t.name)+" ")])],1)})),0)])])},L=[],H=(n("4de4"),n("a15b"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("5319"),n("1276"),n("498a"),{data:function(){return{connection:"",databases:[],search_text:""}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,t.next=3,P.databases(e.connection);case 3:e.databases=t.sent;case 4:case"end":return t.stop()}}),t)})))()},computed:{filtered_databases:function(){if(!this.search_text||!this.search_text.trim())return this.databases;var e=this.search_text.trim().split(""),t="^"+e.join(".*");return this.databases.filter((function(e){return e.name.match(new RegExp(t,"i"))}))}},methods:{endSearch:function(){if(this.filtered_databases.length){var e=this.filtered_databases[0];if(this.filtered_databases.length>1){var t=this.search_text.toLowerCase().replace(/[^a-z]/g,"");for(var n in this.filtered_databases){var a=this.filtered_databases[n],r=a.name.toLowerCase().replace(/[^a-z]/g,"");if(r==t){e=a;break}}}this.$router.push("/db/"+this.connection+"/"+e.name+"/index")}}}}),K=H,Y=Object(_["a"])(K,F,L,!1,null,"61133452",null),U=Y.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-button",{attrs:{variant:"link",to:"/db/"+e.connection+"/"+e.database+"/index"}},[e._v(e._s(e.database))]),n("span",{staticClass:"text-muted"},[e._v("/")]),n("b-dropdown",{staticClass:"text-muted",attrs:{id:"dropdown-dropright",dropright:"",text:"Home",variant:"muted"}},[n("b-dropdown-item",{attrs:{to:"/db/"+e.connection+"/"+e.database+"/home"}},[e._v("Home")]),n("b-dropdown-item",{attrs:{to:"/db/"+e.connection+"/"+e.database+"/index"}},[e._v("Collections")])],1)],1)])]),n("div",{staticClass:"container"},[n("div",{staticClass:"row my-3"},[n("div",{staticClass:"col h4"},[e._v(" "+e._s(e.database)+" ")])])]),n("div",{staticClass:"container table-container"},[n("div",{staticClass:"row py-1"},[n("div",{staticClass:"col"},[e._v(" Data Size ")]),n("div",{staticClass:"col"},[e._v(" "+e._s(e.stats.dataSize)+" ")])]),n("div",{staticClass:"row py-1"},[n("div",{staticClass:"col"},[e._v(" Collections ")]),n("div",{staticClass:"col"},[e._v(" "+e._s(e.stats.collections)+" ")])]),n("div",{staticClass:"row py-1"},[n("div",{staticClass:"col"},[e._v(" Indexes ")]),n("div",{staticClass:"col"},[e._v(" "+e._s(e.stats.indexes)+" ")])]),n("div",{staticClass:"row py-1"},[n("div",{staticClass:"col"},[e._v(" Schema Present ")]),n("div",{staticClass:"col"},[e._v(" "+e._s(e.stats.schema_count)+" / "+e._s(e.stats.collections)+" "),n("a",{staticClass:"ml-2",attrs:{href:"#"}},[e._v(" Run Schema Task ")])])])])])},Z=[],G={data:function(){return{connection:"",database:"",search_text:"",stats:{collections:null,dataSize:null}}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,e.database=e.$route.params.database,t.next=4,e.fetchDbInfo();case 4:case"end":return t.stop()}}),t)})))()},methods:{fetchDbInfo:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.fetchDbInfo(e.connection,e.database);case 2:e.stats=t.sent,e.stats.dataSize=e.formatBytes(e.stats.dataSize);case 4:case"end":return t.stop()}}),t)})))()},formatBytes:function(e){var t="bytes";return e<1e3||(e<1e6?(e/=1e3,t="kb"):e<1e9?(e/=1e6,t="mb"):(e/=1e9,t="gb")),e=Math.round(10*e)/10,e+" "+t}}},Q=G,W=Object(_["a"])(Q,V,Z,!1,null,"98a99bfc",null),X=W.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-button",{attrs:{variant:"link"}},[e._v(e._s(e.database))]),n("span",{staticClass:"text-muted"},[e._v("/")]),n("b-dropdown",{staticClass:"text-muted",attrs:{id:"dropdown-dropright",dropright:"",text:"Collections",variant:"muted"}},[n("b-dropdown-item",{attrs:{to:"/db/"+e.connection+"/"+e.database+"/home"}},[e._v("Home")]),n("b-dropdown-item",{attrs:{to:"/db/"+e.connection+"/"+e.database+"/index"}},[e._v("Collections")])],1)],1)]),n("div",{staticClass:"row my-2"},[n("div",{staticClass:"col"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.endSearch(t)}}},[n("b-form-input",{attrs:{placeholder:"Search",autofocus:""},model:{value:e.search_text,callback:function(t){e.search_text=t},expression:"search_text"}})],1)])]),n("div",{staticClass:"row"},e._l(e.filtered_collections,(function(t){return n("div",{key:t.name,staticClass:"col-md-3 col-sm-6"},[n("router-link",{attrs:{to:"/coll/"+e.connection+"/"+e.database+"/"+t.name+"/index"}},[e._v(" "+e._s(t.displayName)+" "),t.displayCount?n("span",[e._v("("+e._s(t.displayCount)+")")]):e._e()])],1)})),0)])},te=[],ne=(n("99af"),n("4160"),n("159b"),{data:function(){return{connection:"",database:"",search_text:"",collections:[],single_filter:!1}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,e.database=e.$route.params.database,t.next=4,P.collections(e.connection,e.database);case 4:e.collections=t.sent,n=z.get("collection_display"),e.collections.forEach((function(e){e.displayName=e[n],e.count&&(e.count>1e3&&e.count<1e6?e.displayCount=Math.floor(e.count/1e3)+"k":e.count>1e6?e.displayCount=Math.floor(e.count/1e6)+"m":e.displayCount=""+e.count)}));case 7:case"end":return t.stop()}}),t)})))()},computed:{filtered_collections:function(){if(!this.search_text||!this.search_text.trim())return this.collections;var e=this.search_text.trim().split(""),t="^"+e.join(".*");return this.collections.filter((function(e){return e.name.match(new RegExp(t,"i"))}))}},watch:{filtered_collections:function(e){this.single_filter=e&&1==e.length}},methods:{endSearch:function(){if(this.filtered_collections.length){var e=this.filtered_collections[0];if(this.filtered_collections.length>1){var t=this.search_text.toLowerCase().replace(/[^a-z]/g,"");for(var n in this.filtered_collections){var a=this.filtered_collections[n],r=a.name.toLowerCase().replace(/[^a-z]/g,"");if(r==t){e=a;break}}}this.$router.push("/coll/".concat(this.connection,"/").concat(this.database,"/").concat(e.name,"/index"))}}}}),ae=ne,re=Object(_["a"])(ae,ee,te,!1,null,"478b2f18",null),oe=re.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("BreadcrumbComponent",{attrs:{connection:e.connection,database:e.database,collection:e.collection,"display-collection":e.displayCollection,action:"Browse"}})],1),n("div",{staticClass:"col-auto my-auto pl-0 ml-auto"},[n("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["shift","+"],expression:"['shift', '+']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"#",title:"Insert (+)"},on:{shortkey:function(t){return e.openInsert()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.openInsert()}}},[n("span",{staticClass:"fa fa-plus"})]),n("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["/"],expression:"['/']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{href:"#",title:"Search (/)"},on:{shortkey:function(t){return e.openSearch()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.openSearch()}}},[n("span",{staticClass:"fa fa-search"})]),n("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{href:"#",title:"Reload (r)"},on:{shortkey:function(t){return e.reload()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.reload()}}},[n("span",{staticClass:"fa fa-sync"})]),n("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["shift","?"],expression:"['shift', '?']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{href:"#",title:"Keyboard Shortcuts (?)"},on:{shortkey:function(t){return e.openShortcuts()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.openShortcuts()}}},[n("span",{staticClass:"fa fa-question-circle"})])]),n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"col-auto my-auto",attrs:{title:e.totalRows}},[e._v(" "+e._s(e.displayTotal)+" ")]),n("div",{staticClass:"col-auto my-auto pl-0"},[n("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:e.pageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),n("div",{staticClass:"col-auto my-auto pl-0"},[n("b-pagination",{staticClass:"my-1",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)]),n("b-table",{ref:"bv_table",attrs:{id:"records_table",bordered:"",small:"",items:e.records_fn,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage},scopedSlots:e._u([{key:"cell(_id)",fn:function(t){return[n("div",{staticClass:"id-field",on:{click:t.toggleDetails}},[e._v(e._s(t.item._id))])]}},{key:"row-details",fn:function(t){return[n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v(e._s(JSON.stringify(t.item,null,2)))])]),n("div",{staticClass:"small"},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.confirmDelete(t.item)}}},[e._v("Delete")])])]}}])}),e.isCollEmpty?n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col border p-5 text-center h4"},[e.query_text?n("span",[e._v(" No Records Found ")]):n("span",[e._v(" Empty Collection ")])])])]):e._e(),n("b-modal",{attrs:{id:"insert-modal",title:"Insert Document"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[n("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:function(t){return e.insertDoc()}}},[e._v(" Save ")])],1)]},proxy:!0}]),model:{value:e.showInsertModal,callback:function(t){e.showInsertModal=t},expression:"showInsertModal"}},[n("div",[n("b-textarea",{class:{"is-invalid":e.insertError},attrs:{rows:"8",autofocus:""},model:{value:e.insertItem,callback:function(t){e.insertItem=t},expression:"insertItem"}})],1),n("div",{staticClass:"row"},[e.insertError?n("div",{staticClass:"col text-danger"},[e._v(" Invalid JSON. ")]):e._e(),n("div",{staticClass:"col text-right"},[n("a",{staticClass:"small my-2",attrs:{href:"https://docs.mongodb.com/manual/reference/mongodb-extended-json/#example",target:"_blank"}},[e._v(" EJSON Format "),n("i",{staticClass:"fa fa-external-link-alt"})])])])]),n("b-modal",{attrs:{id:"search-modal",title:"Search"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[n("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:function(t){return e.applySearch()}}},[e._v(" Search ")]),n("b-button",{staticClass:"mx-2 float-right",attrs:{variant:"danger",size:"sm"},on:{click:function(t){return e.deleteRecords()}}},[e._v(" Delete ")])],1)]},proxy:!0}]),model:{value:e.showSearchModal,callback:function(t){e.showSearchModal=t},expression:"showSearchModal"}},[n("b-tabs",{attrs:{"content-class":"mt-3"}},[n("b-tab",{attrs:{title:"Query",active:""}},[n("div",[n("b-textarea",{class:{"is-invalid":e.searchError},attrs:{rows:"8",autofocus:""},model:{value:e.query_text,callback:function(t){e.query_text=t},expression:"query_text"}})],1),n("div",{staticClass:"row"},[e.insertError?n("div",{staticClass:"col text-danger"},[e._v(" Invalid JSON. ")]):e._e(),n("div",{staticClass:"col text-right"},[n("a",{staticClass:"small my-2",attrs:{href:"https://docs.mongodb.com/manual/reference/mongodb-extended-json/#example",target:"_blank"}},[e._v(" EJSON Format "),n("i",{staticClass:"fa fa-external-link-alt"})])])])])],1)],1),n("b-modal",{attrs:{id:"shortcuts-modal",title:"Keyboard Shortcuts","ok-only":""},model:{value:e.showShortcutsModal,callback:function(t){e.showShortcutsModal=t},expression:"showShortcutsModal"}},[n("table",{staticClass:"table table-bordered"},[n("tbody",[n("tr",[n("td",[e._v("/")]),n("td",[e._v("Search")])]),n("tr",[n("td",[e._v("+")]),n("td",[e._v("Insert")])]),n("tr",[n("td",[e._v("r")]),n("td",[e._v("Reload")])]),n("tr",[n("td",[e._v("?")]),n("td",[e._v("Keyboard Shortcuts")])])])])]),n("b-modal",{attrs:{id:"clear-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Clear Collection"},on:{ok:function(t){return e.clearCollection()}}},[n("p",[e._v(" This will drop the collection and recreate it with same indexes. "),n("br"),e._v(" You will lose all data in this collection. ")]),n("p",[e._v("Proceed?")])]),n("b-modal",{attrs:{id:"drop-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Drop Collection"},on:{ok:function(t){return e.dropCollection()}}},[n("p",[e._v(" This will drop the collection. "),n("br"),e._v(" You will lose all data and indexes in this collection. ")]),n("p",[e._v("Proceed?")])]),n("b-modal",{attrs:{id:"delete-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Delete"},on:{ok:function(t){return e.deleteRecord()}},model:{value:e.showDeleteModal,callback:function(t){e.showDeleteModal=t},expression:"showDeleteModal"}},[n("p",[e._v(" This will delete below record. ")]),n("p",[e._v("Proceed?")]),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"json"},[e._v(e._s(JSON.stringify(e.deleteItem,null,2)))])])])],1)},ie=[],ce=(n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-button",{attrs:{variant:"link",to:"/db/"+e.connection+"/"+e.database+"/index"}},[e._v(e._s(e.database))]),n("span",{staticClass:"text-muted"},[e._v("/")]),n("b-button",{attrs:{variant:"link",to:"/coll/"+e.connection+"/"+e.database+"/"+e.collection+"/index"}},[e._v(e._s(e.displayCollection))]),n("span",{staticClass:"text-muted"},[e._v("/")]),n("b-dropdown",{staticClass:"text-muted",attrs:{id:"dropdown-dropright",dropright:"",text:e.action,variant:"muted"}},[n("b-dropdown-item",{attrs:{href:"#"}},[e._v("Home")]),n("b-dropdown-item",{attrs:{href:"#",to:"/coll/"+e.connection+"/"+e.database+"/"+e.collection+"/indexes"}},[e._v(" Indexes ")]),n("b-dropdown-item",{attrs:{href:"#",to:"/coll/"+e.connection+"/"+e.database+"/"+e.collection+"/index"}},[e._v(" Browse ")]),n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.search-modal",modifiers:{"search-modal":!0}}],attrs:{href:"#"}},[e._v("Search..")]),n("b-dropdown-item",{attrs:{href:"#",to:"/coll/"+e.connection+"/"+e.database+"/"+e.collection+"/schema"}},[e._v(" Schema ")]),n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.clear-confirmation-modal",modifiers:{"clear-confirmation-modal":!0}}],attrs:{href:"#",variant:"danger"}},[e._v("Clear")]),n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.drop-confirmation-modal",modifiers:{"drop-confirmation-modal":!0}}],attrs:{href:"#",variant:"danger"}},[e._v("Drop")])],1)],1)}),le=[],ue={props:["connection","database","collection","displayCollection","action"]},de=ue,pe=Object(_["a"])(de,ce,le,!1,null,null,null),me=pe.exports,ve={components:{BreadcrumbComponent:me},data:function(){return{connection:"",database:"",collection:"",showInsertModal:!1,showSearchModal:!1,showShortcutsModal:!1,showDeleteModal:!1,isCollEmpty:!1,displayCollection:"",search_text:"",query_text:"",deleteItem:null,insertItem:null,insertError:!1,searchError:!1,fields:null,perPage:20,totalRows:2e3,displayTotal:"100+",currentPage:1,pageOptions:[5,10,20,50,100,500,1e3,2e3]}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connection=e.$route.params.connection,e.database=e.$route.params.database,e.collection=e.$route.params.collection,n=z.get("collection_display"),e.displayCollection="name"==n?e.collection:I.a.upperFirst(I.a.camelCase(e.collection));case 5:case"end":return t.stop()}}),t)})))()},watch:{totalRows:function(e){this.displayTotal=e>1e3&&e<1e6?Math.floor(e/1e3)+"k":e>1e6?Math.floor(e/1e6)+"m":""+e}},methods:{reload:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$root.$emit("bv::refresh::table","records_table");case 1:case"end":return t.stop()}}),t)})))()},records_fn:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.query=t.query,n.next=3,P.records(t.connection,t.database,t.collection,e);case 3:return a=n.sent,r=a.records,t.totalRows=a.count,t.isCollEmpty=!r.length,a.schema&&a.schema.fields&&(t.fields=t.map_fields(a.schema.fields)),n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)})))()},map_fields:function(e){return e.map((function(e){var t,n=e,a=e;return"_id"==n&&(t=!0),{key:n,label:a,sortable:t}}))},clearCollection:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.clear(e.connection,e.database,e.collection);case 2:e.reload();case 3:case"end":return t.stop()}}),t)})))()},dropCollection:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.drop(e.connection,e.database,e.collection);case 2:e.$router.push("/db/".concat(e.connection,"/").concat(e.database,"/index"));case 3:case"end":return t.stop()}}),t)})))()},confirmDelete:function(e){this.deleteItem=e,this.showDeleteModal=!0},deleteRecord:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={_id:{$oid:e.deleteItem._id}},t.next=3,P.deleteRecords(e.connection,e.database,e.collection,n);case 3:e.reload();case 4:case"end":return t.stop()}}),t)})))()},openInsert:function(){this.showInsertModal=!0},insertDoc:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.insertError=!1,t.prev=1,n=JSON.parse(e.insertItem),t.next=9;break;case 5:return t.prev=5,t.t0=t["catch"](1),e.insertError=!0,t.abrupt("return");case 9:return t.next=11,P.insertDoc(e.connection,e.database,e.collection,n);case 11:e.showInsertModal=!1,e.reload();case 13:case"end":return t.stop()}}),t,null,[[1,5]])})))()},openSearch:function(){this.showSearchModal=!0},openShortcuts:function(){this.showShortcutsModal=!0},applySearch:function(){var e;if(this.searchError=!1,this.query_text&&this.query_text.trim())try{e=JSON.parse(this.query_text)}catch(t){return void(this.searchError=!0)}e||(e={}),this.showSearchModal=!1,this.query=e,this.$root.$emit("bv::refresh::table","records_table")},deleteRecords:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.showSearchModal=!1,e.query_text&&e.query_text.trim())try{n=JSON.parse(e.query_text)}catch(r){}return n||(n={}),t.next=5,P.deleteRecords(e.connection,e.database,e.collection,n);case 5:a=t.sent,console.log("delete result",a),e.$bvToast.toast("".concat(a.count," records deleted"),{title:"Success",variant:"success",solid:!0,autoHideDelay:5e3,appendToast:!0}),e.query=null,e.$root.$emit("bv::refresh::table","records_table");case 10:case"end":return t.stop()}}),t)})))()}}},he=ve,fe=(n("dca6"),Object(_["a"])(he,se,ie,!1,null,null,null)),be=fe.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("BreadcrumbComponent",{attrs:{connection:e.connection,database:e.database,collection:e.collection,"display-collection":e.displayCollection,action:"Schema"}})],1),n("div",{staticClass:"col-auto my-auto pl-0 ml-auto"},[n("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"#",title:"Reload (r)"},on:{shortkey:function(t){return e.reload()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.reload()}}},[n("span",{staticClass:"fa fa-sync"})]),n("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-modal",rawName:"v-b-modal.rebuild-confirmation-modal",modifiers:{"rebuild-confirmation-modal":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-danger ml-2",attrs:{href:"#",title:"Rebuild"},on:{shortkey:function(t){return e.rebuildSchema()}}},[n("span",{staticClass:"fa fa-undo"})])])]),e.isSchemaEmpty?n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col border p-5 text-center"},[n("div",{staticClass:"h4"},[e._v(" No Schema ")]),n("div",[n("a",{staticClass:"btn btn-primary",on:{click:e.rebuildSchema}},[e._v(" Build Schema ")])])])])]):n("div",[n("div",{staticClass:"container table-container"},e._l(this.fields,(function(t){return n("div",{key:t._id,staticClass:"row",class:"field-type-"+t.type},[n("div",{class:["col","field-depth-"+t.depth]},[e._v(" "+e._s(t.path)+" ")]),n("div",{staticClass:"col"},[e._v(" "+e._s(t.type)+" "),t.sub_type?n("span",[e._v("("+e._s(t.sub_type)+")")]):e._e(),t.probability?n("span",{staticClass:"small text-muted"},[e._v("("+e._s(t.probability)+"%)")]):e._e()])])})),0)]),n("b-modal",{attrs:{id:"rebuild-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Rebuild"},on:{ok:function(t){return e.rebuildSchema()}}},[n("p",[e._v(" This will delete exising schema changes, if any. "),n("br"),e._v(" It will rebuild the schema based on latest data. ")]),n("p",[e._v("Proceed?")])])],1)},ge=[],we={components:{BreadcrumbComponent:me},data:function(){return{connection:"",database:"",collection:"",displayCollection:"",isSchemaEmpty:!1,fields:[]}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,e.database=e.$route.params.database,e.collection=e.$route.params.collection,n=z.get("collection_display"),e.displayCollection="name"==n?e.collection:I.a.upperFirst(I.a.camelCase(e.collection)),t.next=7,e.reload();case 7:case"end":return t.stop()}}),t)})))()},methods:{reload:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.loadSchema(e.connection,e.database,e.collection);case 2:e.fields=t.sent,e.fields&&e.fields.length?e.isSchemaEmpty=!1:e.isSchemaEmpty=!0;case 4:case"end":return t.stop()}}),t)})))()},rebuildSchema:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.rebuildSchema(e.connection,e.database,e.collection);case 2:return t.next=4,e.reload();case 4:case"end":return t.stop()}}),t)})))()}}},xe=we,ye=(n("97a5"),Object(_["a"])(xe,_e,ge,!1,null,"3135638d",null)),Ce=ye.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("BreadcrumbComponent",{attrs:{connection:e.connection,database:e.database,collection:e.collection,"display-collection":e.displayCollection,action:"Indexes"}})],1),n("div",{staticClass:"col-auto my-auto pl-0 ml-auto"},[n("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["shift","+"],expression:"[ 'shift', '+']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"#",title:"Create Index (+)"},on:{shortkey:function(t){return e.showCreate()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.showCreate()}}},[n("span",{staticClass:"fa fa-plus"})]),n("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{href:"#",title:"Reload (r)"},on:{shortkey:function(t){return e.reload()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.reload()}}},[n("span",{staticClass:"fa fa-sync"})])])]),e.isEmpty?n("div",[e._m(0)]):n("div",[n("div",{staticClass:"container table-container mt-3"},e._l(this.indexes,(function(t){return n("div",{key:t.name,staticClass:"row py-2"},[n("div",{staticClass:"col text-monospace"},[e._v(" "+e._s(JSON.stringify(t.key))+" ")]),n("div",{staticClass:"col text-center"},["_id_"!=t.name?n("span",{staticClass:"text-warning fa fa-trash",on:{click:function(n){return e.deleteConfirmation(t)}}}):e._e()])])})),0)]),n("b-modal",{attrs:{id:"delete-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Delete"},on:{ok:function(t){return e.deleteIndex()}},model:{value:e.showDeleteModal,callback:function(t){e.showDeleteModal=t},expression:"showDeleteModal"}},[n("div",[e._v("This will delete below index.")]),n("div",{staticClass:"text-monospace my-2"},[e._v(" "+e._s(this.deleteItem?JSON.stringify(this.deleteItem.key):"")+" ")]),n("div",[e._v("Proceed?")])])],1)},Se=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col border p-5 text-center"},[n("div",{staticClass:"h4"},[e._v(" No Indexes Found ")])])])}],Re={components:{BreadcrumbComponent:me},data:function(){return{connection:"",database:"",collection:"",displayCollection:"",isEmpty:!1,indexes:[],deleteItem:null,showDeleteModal:!1}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,e.database=e.$route.params.database,e.collection=e.$route.params.collection,n=z.get("collection_display"),e.displayCollection="name"==n?e.collection:I.a.upperFirst(I.a.camelCase(e.collection)),t.next=7,e.reload();case 7:case"end":return t.stop()}}),t)})))()},methods:{reload:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.getIndexes(e.connection,e.database,e.collection);case 2:e.indexes=t.sent,e.indexes&&e.indexes.length?e.isEmpty=!1:e.isEmpty=!0;case 4:case"end":return t.stop()}}),t)})))()},deleteConfirmation:function(e){this.deleteItem=e,this.showDeleteModal=!0},deleteIndex:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.deleteIndex(e.connection,e.database,e.collection,e.deleteItem.name);case 2:e.reload();case 3:case"end":return t.stop()}}),t)})))()}}},Oe=Re,je=Object(_["a"])(Oe,ke,Se,!1,null,null,null),De=je.exports,Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),n("div",{staticClass:"container table-container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v(" Collection Display ")]),n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.collection_display,expression:"collection_display"}],attrs:{type:"radio",value:"name"},domProps:{checked:e._q(e.collection_display,"name")},on:{change:function(t){e.collection_display="name"}}}),e._v(" "),n("label",{attrs:{for:"one"}},[e._v("By Name")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.collection_display,expression:"collection_display"}],attrs:{type:"radio",value:"model_name"},domProps:{checked:e._q(e.collection_display,"model_name")},on:{change:function(t){e.collection_display="model_name"}}}),e._v(" "),n("label",{attrs:{for:"two"}},[e._v("By Model Name")])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v(" Records Display Default (TBD) ")]),n("div",{staticClass:"col"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.records_display_default,expression:"records_display_default"}],attrs:{type:"radio",value:"table"},domProps:{checked:e._q(e.records_display_default,"table")},on:{change:function(t){e.records_display_default="table"}}}),e._v(" "),n("label",{attrs:{for:"one"}},[e._v("Tabular")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.records_display_default,expression:"records_display_default"}],attrs:{type:"radio",value:"json"},domProps:{checked:e._q(e.records_display_default,"json")},on:{change:function(t){e.records_display_default="json"}}}),e._v(" "),n("label",{attrs:{for:"two"}},[e._v("JSON")])])])]),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row justify-content-end"},[n("div",{staticClass:"col-auto"},[n("b-button",{attrs:{variant:"primary"},on:{click:e.saveClientSettings}},[e._v("Save")])],1)])]),e._m(1),n("div",{staticClass:"container table-container"},[n("div",{staticClass:"row"},[e._m(2),n("div",{staticClass:"col p-1"},[n("b-form-input",{attrs:{readonly:""},model:{value:e.serverSettings.default_connection,callback:function(t){e.$set(e.serverSettings,"default_connection",t)},expression:"serverSettings.default_connection"}})],1)]),n("div",{staticClass:"row"},[e._m(3),n("div",{staticClass:"col p-1"},[n("b-form-input",{attrs:{readonly:""},model:{value:e.serverSettings.mongozap_database,callback:function(t){e.$set(e.serverSettings,"mongozap_database",t)},expression:"serverSettings.mongozap_database"}})],1)])])])},Ne=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row my-3"},[n("div",{staticClass:"col h4"},[e._v(" Client Settings ")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row my-3"},[n("div",{staticClass:"col h4"},[e._v(" Server Settings ")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col"},[e._v(" Default Connection "),n("div",{staticClass:"small"},[e._v("process.env.DEFAULT_DATABASE "),n("br"),e._v(" (see .env file)")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col"},[e._v(" Mongozap Database "),n("div",{staticClass:"small"},[e._v("process.env.MONGOZAP_DATABASE "),n("br"),e._v(" (see .env file)")])])}],Ie={data:function(){return{collection_display:"",records_display_default:"",serverSettings:{}}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.collection_display=z.get("collection_display")||"name",e.records_display_default=z.get("records_display_default")||"table",t.next=4,e.loadServerSettings();case 4:case"end":return t.stop()}}),t)})))()},methods:{saveClientSettings:function(){z.set("collection_display",this.collection_display),z.set("records_display_default",this.records_display_default)},loadServerSettings:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.getServerSettings();case 2:e.serverSettings=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}},$e=Ie,Ee=Object(_["a"])($e,Me,Ne,!1,null,null,null),Pe=Ee.exports;a["default"].config.productionTip=!1,a["default"].use(r["a"]),a["default"].use(s["a"]),a["default"].use(o["a"],{prefix:"mzp_"}),a["default"].use(c.a,{prevent:["input","textarea"]}),a["default"].use(u.a);var qe=[{path:"/",component:J},{path:"/db/:connection/list",component:U},{path:"/db/:connection/:database/home",component:X},{path:"/db/:connection/:database/index",component:oe},{path:"/coll/:connection/:database/:collection/index",component:be},{path:"/coll/:connection/:database/:collection/schema",component:Ce},{path:"/coll/:connection/:database/:collection/indexes",component:De},{path:"/settings",component:Pe}],ze=new s["a"]({routes:qe});new a["default"]({router:ze,render:function(e){return e(k)}}).$mount("#app")},"770a":function(e,t,n){e.exports=n.p+"img/mongozap-logo.9a71a4c7.png"},"97a5":function(e,t,n){"use strict";var a=n("e657"),r=n.n(a);r.a},a3b2:function(e,t,n){},c0cc:function(e,t,n){"use strict";var a=n("d39e"),r=n.n(a);r.a},d39e:function(e,t,n){},dca6:function(e,t,n){"use strict";var a=n("49dc"),r=n.n(a);r.a},e02c:function(e,t,n){e.exports=n.p+"img/github-logo.ef7a02b6.png"},e657:function(e,t,n){}});
//# sourceMappingURL=app.b64760aa.js.map