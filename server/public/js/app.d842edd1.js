(function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0fd5":function(e,t,a){var n={"./af":"8206","./af.js":"8206","./ar":"cdac","./ar-dz":"7f26","./ar-dz.js":"7f26","./ar-kw":"8e88","./ar-kw.js":"8e88","./ar-ly":"cd65","./ar-ly.js":"cd65","./ar-ma":"e8d6","./ar-ma.js":"e8d6","./ar-sa":"a284","./ar-sa.js":"a284","./ar-tn":"64f7","./ar-tn.js":"64f7","./ar.js":"cdac","./az":"b139","./az.js":"b139","./be":"98e2","./be.js":"98e2","./bg":"a1a5","./bg.js":"a1a5","./bm":"4d0d","./bm.js":"4d0d","./bn":"e8ae","./bn.js":"e8ae","./bo":"bcf2","./bo.js":"bcf2","./br":"69f1","./br.js":"69f1","./bs":"24d1","./bs.js":"24d1","./ca":"3507","./ca.js":"3507","./cs":"d15f","./cs.js":"d15f","./cv":"7bfe","./cv.js":"7bfe","./cy":"1d35","./cy.js":"1d35","./da":"a019","./da.js":"a019","./de":"0cfa","./de-at":"edea","./de-at.js":"edea","./de-ch":"9aae","./de-ch.js":"9aae","./de.js":"0cfa","./dv":"1722","./dv.js":"1722","./el":"5390","./el.js":"5390","./en-au":"dad9","./en-au.js":"dad9","./en-ca":"6f13","./en-ca.js":"6f13","./en-gb":"6267","./en-gb.js":"6267","./en-ie":"80b1","./en-ie.js":"80b1","./en-il":"ad38","./en-il.js":"ad38","./en-in":"eb60","./en-in.js":"eb60","./en-nz":"39db","./en-nz.js":"39db","./en-sg":"c30d","./en-sg.js":"c30d","./eo":"1a30","./eo.js":"1a30","./es":"48a3","./es-do":"f306","./es-do.js":"f306","./es-us":"60bf","./es-us.js":"60bf","./es.js":"48a3","./et":"f891","./et.js":"f891","./eu":"a403","./eu.js":"a403","./fa":"ce14","./fa.js":"ce14","./fi":"fc14","./fi.js":"fc14","./fil":"f46e","./fil.js":"f46e","./fo":"2bf2","./fo.js":"2bf2","./fr":"c1e8","./fr-ca":"50a2","./fr-ca.js":"50a2","./fr-ch":"b087","./fr-ch.js":"b087","./fr.js":"c1e8","./fy":"4665","./fy.js":"4665","./ga":"b396","./ga.js":"b396","./gd":"056c","./gd.js":"056c","./gl":"efde","./gl.js":"efde","./gom-deva":"12ea","./gom-deva.js":"12ea","./gom-latn":"8e2c","./gom-latn.js":"8e2c","./gu":"533d","./gu.js":"533d","./he":"7520","./he.js":"7520","./hi":"d2f3","./hi.js":"d2f3","./hr":"7e79","./hr.js":"7e79","./hu":"148f","./hu.js":"148f","./hy-am":"6711","./hy-am.js":"6711","./id":"2b10","./id.js":"2b10","./is":"1feb","./is.js":"1feb","./it":"1b21","./it-ch":"8d2c","./it-ch.js":"8d2c","./it.js":"1b21","./ja":"926e","./ja.js":"926e","./jv":"5a78","./jv.js":"5a78","./ka":"5975","./ka.js":"5975","./kk":"cc93","./kk.js":"cc93","./km":"66e1","./km.js":"66e1","./kn":"5421","./kn.js":"5421","./ko":"1297","./ko.js":"1297","./ku":"16f8","./ku.js":"16f8","./ky":"3df9","./ky.js":"3df9","./lb":"c124","./lb.js":"c124","./lo":"20a5","./lo.js":"20a5","./lt":"c14a","./lt.js":"c14a","./lv":"c553","./lv.js":"c553","./me":"ae25","./me.js":"ae25","./mi":"6f56","./mi.js":"6f56","./mk":"c8fc","./mk.js":"c8fc","./ml":"752d","./ml.js":"752d","./mn":"f09e","./mn.js":"f09e","./mr":"0a56","./mr.js":"0a56","./ms":"55b6","./ms-my":"a9e9","./ms-my.js":"a9e9","./ms.js":"55b6","./mt":"624b","./mt.js":"624b","./my":"e256","./my.js":"e256","./nb":"e1d5","./nb.js":"e1d5","./ne":"761a","./ne.js":"761a","./nl":"a0f2","./nl-be":"5cb2","./nl-be.js":"5cb2","./nl.js":"a0f2","./nn":"4fda","./nn.js":"4fda","./oc-lnc":"ec3d","./oc-lnc.js":"ec3d","./pa-in":"2f2f","./pa-in.js":"2f2f","./pl":"317f","./pl.js":"317f","./pt":"5553","./pt-br":"a9ab","./pt-br.js":"a9ab","./pt.js":"5553","./ro":"db12","./ro.js":"db12","./ru":"7aa4","./ru.js":"7aa4","./sd":"e87b","./sd.js":"e87b","./se":"a296","./se.js":"a296","./si":"51ec","./si.js":"51ec","./sk":"608b","./sk.js":"608b","./sl":"b367","./sl.js":"b367","./sq":"f68f","./sq.js":"f68f","./sr":"0991","./sr-cyrl":"c577","./sr-cyrl.js":"c577","./sr.js":"0991","./ss":"cf76","./ss.js":"cf76","./sv":"0153","./sv.js":"0153","./sw":"cb6f","./sw.js":"cb6f","./ta":"8bfa","./ta.js":"8bfa","./te":"668b","./te.js":"668b","./tet":"eae7","./tet.js":"eae7","./tg":"70b1","./tg.js":"70b1","./th":"7180","./th.js":"7180","./tk":"4912","./tk.js":"4912","./tl-ph":"f8bb","./tl-ph.js":"f8bb","./tlh":"b026","./tlh.js":"b026","./tr":"371d","./tr.js":"371d","./tzl":"c744","./tzl.js":"c744","./tzm":"787a","./tzm-latn":"71e0","./tzm-latn.js":"71e0","./tzm.js":"787a","./ug-cn":"6b5c","./ug-cn.js":"6b5c","./uk":"8c0c","./uk.js":"8c0c","./ur":"519e","./ur.js":"519e","./uz":"7982","./uz-latn":"3137","./uz-latn.js":"3137","./uz.js":"7982","./vi":"ae22","./vi.js":"ae22","./x-pseudo":"1129","./x-pseudo.js":"1129","./yo":"b4bf","./yo.js":"b4bf","./zh-cn":"fdc4","./zh-cn.js":"fdc4","./zh-hk":"747d","./zh-hk.js":"747d","./zh-mo":"fe39","./zh-mo.js":"fe39","./zh-tw":"d3e0","./zh-tw.js":"d3e0"};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="0fd5"},"49dc":function(e,t,a){},"560b":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=a("5f5b"),s=a("3717"),o=a.n(s),i=a("998c"),c=a.n(i),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("MasterLayout")],1)},u=[],d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-navbar",{staticClass:"py-1",attrs:{toggleable:"lg",type:"light",variant:"light"}},[n("b-navbar-brand",{attrs:{href:"#"}},[e._v(" MongoZap "),n("img",{staticStyle:{height:"1.4em"},attrs:{alt:"Vue logo",src:a("770a")}})]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{href:"#"}},[n("router-link",{attrs:{to:"/"}},[e._v("Connections")])],1),n("b-nav-item",{attrs:{href:"#"}},[n("router-link",{attrs:{to:"/db/0/list"}},[e._v("Databases")])],1),n("b-nav-item",{attrs:{href:"#"}},[n("router-link",{attrs:{to:"/settings"}},[e._v("Settings")])],1)],1),n("b-navbar-nav",{staticClass:"ml-auto"},[e.username?n("b-nav-item",[e._v(" "+e._s(e.username)+" ("),n("a",{attrs:{href:"#"},on:{click:e.logout}},[e._v("Logout")]),e._v(") ")]):n("b-nav-item",[n("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1),n("b-nav-item",{attrs:{href:"https://github.com/svamja/mongozap",target:"_blank"}},[n("img",{staticStyle:{height:"1.4em"},attrs:{alt:"Vue logo",src:a("e02c")}})])],1)],1)],1),n("div",{staticClass:"content-wrapper"},[n("router-view")],1),e._m(0)],1)},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"mt-3 mb-1 small"},[e._v("Made with "),a("span",{staticStyle:{color:"#e25555"}},[e._v("â™¥")]),e._v(" in India")])])])])}],p=(a("96cf"),a("1da1")),v={data:function(){return{connection:"",database:"",collection:"",username:""}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connection=e.$route.params.connection,e.database=e.$route.params.database,a=e.$storage.get("authUser"),a&&a.username&&(e.username=a.username);case 4:case"end":return t.stop()}}),t)})))()},methods:{logout:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$storage.remove("authUser"),e.$router.push("/login"),window.location.reload();case 3:case"end":return t.stop()}}),t)})))()}}},f=v,h=(a("c0cc"),a("2877")),b=Object(h["a"])(f,d,m,!1,null,null,null),_=b.exports,g={name:"App",components:{MasterLayout:_}},w=g,y=Object(h["a"])(w,l,u,!1,null,null,null),x=y.exports,C=(a("b0c0"),a("8c4f")),k=a("99d1"),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col h4"},[e._v(" Connections "),a("span",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["shift","+"],expression:"[ 'shift', '+' ]"},{name:"b-modal",rawName:"v-b-modal.add-connection-modal",modifiers:{"add-connection-modal":!0}}],staticClass:"fa fa-plus ml-3 text-primary",on:{shortkey:function(t){e.showAddModal=!0}}})]),a("div",{staticClass:"col text-right"},[a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["shift","?"],expression:"['shift', '?']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{href:"#",title:"Keyboard Shortcuts (?)"},on:{shortkey:function(t){return e.openShortcuts()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.openShortcuts()}}},[a("span",{staticClass:"fa fa-question-circle"})])])])]),a("div",{staticClass:"container table-container"},[a("div",{staticClass:"row py-2 h4"},[a("div",{staticClass:"col"},[a("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["1"],expression:"['1']"}],on:{shortkey:function(t){return e.selectDb(0)}}},[e._v(" 1. "),a("router-link",{attrs:{to:"/db/0/list"}},[e._v(" Default ")])],1),a("div",{staticClass:"small text-muted ml-4"},[e._v(" "+e._s(e.serverSettings.default_connection)+" ")])])]),e._l(e.connections,(function(t,n){return a("div",{key:t.url,staticClass:"row py-2 h4"},[a("div",{staticClass:"col"},[a("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:[n+2],expression:"[ index + 2 ]"}],on:{shortkey:function(t){return e.selectDb(n+1)}}},[e._v(" "+e._s(n+2)+". "),a("router-link",{attrs:{to:"/db/"+(n+1)+"/list"}},[e._v(" "+e._s(t.name)+" ")])],1),a("div",{staticClass:"small text-muted ml-4"},[e._v(" "+e._s(t.url)+" ")])]),a("div",{staticClass:"col text-center"},[a("span",{staticClass:"text-warning fa fa-trash",on:{click:function(t){return e.deleteConfirmation(n)}}})])])}))],2),a("b-modal",{attrs:{id:"add-connection-modal",title:"Add Connection"},on:{ok:function(t){return e.addConnection()}},model:{value:e.showAddModal,callback:function(t){e.showAddModal=t},expression:"showAddModal"}},[a("div",[a("b-form-input",{attrs:{placeholder:"Name",autofocus:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("div",{staticClass:"my-3"},[a("b-form-input",{attrs:{placeholder:"URL"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1)]),a("b-modal",{attrs:{id:"delete-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Delete Connection"},on:{ok:function(t){return e.deleteConnection()}},model:{value:e.showDeleteModal,callback:function(t){e.showDeleteModal=t},expression:"showDeleteModal"}},[a("p",[e._v(" This will simply delete the connection. It will not delete any underlying data. "),a("br"),e._v(" You can add the connection again and view the data. ")]),a("p",[e._v("Proceed?")])]),a("b-modal",{attrs:{id:"shortcuts-modal",title:"Keyboard Shortcuts","ok-only":""},model:{value:e.showShortcutsModal,callback:function(t){e.showShortcutsModal=t},expression:"showShortcutsModal"}},[a("table",{staticClass:"table table-bordered"},[a("tbody",[a("tr",[a("td",[e._v("+")]),a("td",[e._v("Add Connection")])]),a("tr",[a("td",[e._v("1")]),a("td",[e._v("Connection 1")])]),a("tr",[a("td",[e._v("2")]),a("td",[e._v("Connection 2")])]),a("tr",[a("td",[e._v(".")]),a("td",[e._v("..")])])])])])],1)},S=[],R=(a("a434"),a("d4ec")),O=a("bee2"),I=a("bc3a"),$=a.n(I),D=a("2ef0"),N=a.n(D),M="api",E=function(){function e(){Object(R["a"])(this,e)}return Object(O["a"])(e,null,[{key:"api_call",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,s,o,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i.length>2&&void 0!==i[2]?i[2]:{},!n.connection_id){e.next=6;break}return e.next=4,z.connection(n.connection_id);case 4:n.connection_url=e.sent,delete n.connection_id;case 6:if(s=M+a,"get"!=t){e.next=14;break}return o={params:n},e.next=11,$.a.get(s,o);case 11:r=e.sent,e.next=24;break;case 14:if("post"!=t){e.next=20;break}return e.next=17,$.a.post(s,n);case 17:r=e.sent,e.next=24;break;case 20:if("delete"!=t){e.next=24;break}return e.next=23,$.a.delete(s,{data:n});case 23:r=e.sent;case 24:return e.abrupt("return",r);case 25:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"databases",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/databases",{connection_id:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"collections",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/collections",{connection_id:t,db:a});case 2:return n=e.sent,r=n.data,r=N.a.sortBy(r,["name"]),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"records",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a,n,r){var s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={connection_id:t,db:a,coll:n},r&&(r.currentPage&&(s.page=r.currentPage-1),r.perPage&&(s.perPage=r.perPage),r.query&&(s.query=JSON.stringify(r.query)),r.sortBy&&(o=1,r.sortDesc&&(o=-1),s.sort={},s.sort[r.sortBy]=o)),e.next=4,this.api_call("post","/collection/index",s);case 4:return i=e.sent,c=i.data,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/collection/clear",{connection_id:t,db:a,coll:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"drop",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/collection/drop",{connection_id:t,db:a,coll:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"loadSchema",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/collection/schema",{connection_id:t,db:a,coll:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"rebuildSchema",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a,n){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=!0,e.next=3,this.api_call("get","/collection/schema",{connection_id:t,db:a,coll:n,rebuild:r});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"bulkOps",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a,n,r){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/collection/bulk",{connection_id:t,db:a,coll:n,ops:r});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r){return e.apply(this,arguments)}return t}()},{key:"getIndexes",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/collection/indexes",{connection_id:t,db:a,coll:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"deleteIndex",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a,n,r){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("delete","/collection/indexes",{connection_id:t,db:a,coll:n,index_name:r});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r){return e.apply(this,arguments)}return t}()},{key:"getServerSettings",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/settings/get");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setServerSettings",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/settings/set",{settings:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetchDbInfo",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("get","/db/info",{connection_id:t,db:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"insertDoc",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a,n,r){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/collection/insert",{connection_id:t,db:a,coll:n,doc:r});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r){return e.apply(this,arguments)}return t}()},{key:"deleteRecords",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a,n,r){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/collection/delete",{connection_id:t,db:a,coll:n,query:r});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r){return e.apply(this,arguments)}return t}()},{key:"login",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api_call("post","/login",{username:t,password:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()}]),e}(),q=E,P={serverSettings:{},get:function(e){var t={collection_display:"name"},a=n["default"].$storage.get(e);return a=a||t[e],a},set:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n["default"].$storage.set(e,t,a)},getServerSettings:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.getServerSettings();case 2:return e.serverSettings=t.sent,t.abrupt("return",e.serverSettings);case 4:case"end":return t.stop()}}),t)})))()},setServerSettings:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,q.setServerSettings(e);case 2:t.serverSettings=a.sent;case 3:case"end":return a.stop()}}),a)})))()},setConnections:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.serverSettings.connections=e,a.next=3,t.setServerSettings(t.serverSettings);case 3:t.serverSettings=a.sent;case 4:case"end":return a.stop()}}),a)})))()},getConnections:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getServerSettings();case 2:return e.serverSettings=t.sent,t.abrupt("return",e.serverSettings["connections"]||[]);case 4:case"end":return t.stop()}}),t)})))()},connection:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.serverSettings.default_connection){a.next=3;break}return a.next=3,t.getServerSettings();case 3:if(0!=e){a.next=7;break}return a.abrupt("return",t.serverSettings.default_connection);case 7:return a.abrupt("return",t.serverSettings.connections[e-1].url);case 8:case"end":return a.stop()}}),a)})))()}},z=P,T={data:function(){return{serverSettings:{},connections:[],name:"",url:"",deleteIndex:-1,showDeleteModal:!1,showAddModal:!1,showShortcutsModal:!1}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.getConnections();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:return e.connections=t.t0,t.next=8,z.getServerSettings();case 8:e.serverSettings=t.sent;case 9:case"end":return t.stop()}}),t)})))()},methods:{addConnection:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.url){t.next=6;break}return e.connections.push({name:e.name||e.url,url:e.url}),t.next=4,z.setConnections(e.connections);case 4:e.name="",e.url="";case 6:case"end":return t.stop()}}),t)})))()},deleteConfirmation:function(e){this.deleteIndex=e,this.showDeleteModal=!0},deleteConnection:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.deleteIndex>-1)){t.next=5;break}return e.connections.splice(e.deleteIndex,1),t.next=4,z.setConnections(e.connections);case 4:e.deleteIndex=-1;case 5:case"end":return t.stop()}}),t)})))()},selectDb:function(e){this.$router.push("/db/"+e+"/list")},openShortcuts:function(){this.showShortcutsModal=!0}}},B=T,A=Object(h["a"])(B,j,S,!1,null,"4de1ce34",null),F=A.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("b-button",{staticClass:"ml-0 pl-0",attrs:{variant:"link",to:"/db/"+e.connection+"/list"}},[e._v("Databases")])],1)]),a("div",{staticClass:"row my-2"},[a("div",{staticClass:"col"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.endSearch(t)}}},[a("b-form-input",{attrs:{placeholder:"Search",autofocus:""},model:{value:e.search_text,callback:function(t){e.search_text=t},expression:"search_text"}})],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},e._l(e.filtered_databases,(function(t){return a("div",{key:t.name},[a("router-link",{attrs:{to:"/db/"+e.connection+"/"+t.name+"/index"}},[e._v(" "+e._s(t.name)+" ")])],1)})),0)])])},L=[],U=(a("4de4"),a("a15b"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("5319"),a("1276"),a("498a"),{data:function(){return{connection:"",databases:[],search_text:""}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,t.next=3,q.databases(e.connection);case 3:e.databases=t.sent;case 4:case"end":return t.stop()}}),t)})))()},computed:{filtered_databases:function(){if(!this.search_text||!this.search_text.trim())return this.databases;var e=this.search_text.trim().split(""),t="^"+e.join(".*");return this.databases.filter((function(e){return e.name.match(new RegExp(t,"i"))}))}},methods:{endSearch:function(){if(this.filtered_databases.length){var e=this.filtered_databases[0];if(this.filtered_databases.length>1){var t=this.search_text.toLowerCase().replace(/[^a-z]/g,"");for(var a in this.filtered_databases){var n=this.filtered_databases[a],r=n.name.toLowerCase().replace(/[^a-z]/g,"");if(r==t){e=n;break}}}this.$router.push("/db/"+this.connection+"/"+e.name+"/index")}}}}),Y=U,H=Object(h["a"])(Y,J,L,!1,null,"61133452",null),K=H.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("b-button",{attrs:{variant:"link",to:"/db/"+e.connection+"/"+e.database+"/index"}},[e._v(e._s(e.database))]),a("span",{staticClass:"text-muted"},[e._v("/")]),a("b-dropdown",{staticClass:"text-muted",attrs:{id:"dropdown-dropright",dropright:"",text:"Home",variant:"muted"}},[a("b-dropdown-item",{attrs:{to:"/db/"+e.connection+"/"+e.database+"/home"}},[e._v("Home")]),a("b-dropdown-item",{attrs:{to:"/db/"+e.connection+"/"+e.database+"/index"}},[e._v("Collections")])],1)],1)])]),a("div",{staticClass:"container"},[a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col h4"},[e._v(" "+e._s(e.database)+" ")])])]),a("div",{staticClass:"container table-container"},[a("div",{staticClass:"row py-1"},[a("div",{staticClass:"col"},[e._v(" Data Size ")]),a("div",{staticClass:"col"},[e._v(" "+e._s(e.stats.dataSize)+" ")])]),a("div",{staticClass:"row py-1"},[a("div",{staticClass:"col"},[e._v(" Collections ")]),a("div",{staticClass:"col"},[e._v(" "+e._s(e.stats.collections)+" ")])]),a("div",{staticClass:"row py-1"},[a("div",{staticClass:"col"},[e._v(" Indexes ")]),a("div",{staticClass:"col"},[e._v(" "+e._s(e.stats.indexes)+" ")])]),a("div",{staticClass:"row py-1"},[a("div",{staticClass:"col"},[e._v(" Schema Present ")]),a("div",{staticClass:"col"},[e._v(" "+e._s(e.stats.schema_count)+" / "+e._s(e.stats.collections)+" "),a("a",{staticClass:"ml-2",attrs:{href:"#"}},[e._v(" Run Schema Task ")])])])])])},V=[],Z={data:function(){return{connection:"",database:"",search_text:"",stats:{collections:null,dataSize:null}}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,e.database=e.$route.params.database,t.next=4,e.fetchDbInfo();case 4:case"end":return t.stop()}}),t)})))()},methods:{fetchDbInfo:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.fetchDbInfo(e.connection,e.database);case 2:e.stats=t.sent,e.stats.dataSize=e.formatBytes(e.stats.dataSize);case 4:case"end":return t.stop()}}),t)})))()},formatBytes:function(e){var t="bytes";return e<1e3||(e<1e6?(e/=1e3,t="kb"):e<1e9?(e/=1e6,t="mb"):(e/=1e9,t="gb")),e=Math.round(10*e)/10,e+" "+t}}},G=Z,W=Object(h["a"])(G,Q,V,!1,null,"98a99bfc",null),X=W.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("b-button",{attrs:{variant:"link"}},[e._v(e._s(e.database))]),a("span",{staticClass:"text-muted"},[e._v("/")]),a("b-dropdown",{staticClass:"text-muted",attrs:{id:"dropdown-dropright",dropright:"",text:"Collections",variant:"muted"}},[a("b-dropdown-item",{attrs:{to:"/db/"+e.connection+"/"+e.database+"/home"}},[e._v("Home")]),a("b-dropdown-item",{attrs:{to:"/db/"+e.connection+"/"+e.database+"/index"}},[e._v("Collections")])],1)],1)]),a("div",{staticClass:"row my-2"},[a("div",{staticClass:"col"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.endSearch(t)}}},[a("b-form-input",{attrs:{placeholder:"Search",autofocus:""},model:{value:e.search_text,callback:function(t){e.search_text=t},expression:"search_text"}})],1)])]),a("div",{staticClass:"row"},e._l(e.filtered_collections,(function(t){return a("div",{key:t.name,staticClass:"col-md-3 col-sm-6"},[a("router-link",{attrs:{to:"/coll/"+e.connection+"/"+e.database+"/"+t.name+"/index"}},[e._v(" "+e._s(t.displayName)+" "),t.displayCount?a("span",[e._v("("+e._s(t.displayCount)+")")]):e._e()])],1)})),0)])},te=[],ae=(a("99af"),a("4160"),a("159b"),{data:function(){return{connection:"",database:"",search_text:"",collections:[],single_filter:!1}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,e.database=e.$route.params.database,t.next=4,q.collections(e.connection,e.database);case 4:e.collections=t.sent,a=z.get("collection_display"),e.collections.forEach((function(e){e.displayName=e[a],e.count&&(e.count>1e3&&e.count<1e6?e.displayCount=Math.floor(e.count/1e3)+"k":e.count>1e6?e.displayCount=Math.floor(e.count/1e6)+"m":e.displayCount=""+e.count)}));case 7:case"end":return t.stop()}}),t)})))()},computed:{filtered_collections:function(){if(!this.search_text||!this.search_text.trim())return this.collections;var e=this.search_text.trim().split(""),t="^"+e.join(".*");return this.collections.filter((function(e){return e.name.match(new RegExp(t,"i"))}))}},watch:{filtered_collections:function(e){this.single_filter=e&&1==e.length}},methods:{endSearch:function(){if(this.filtered_collections.length){var e=this.filtered_collections[0];if(this.filtered_collections.length>1){var t=this.search_text.toLowerCase().replace(/[^a-z]/g,"");for(var a in this.filtered_collections){var n=this.filtered_collections[a],r=n.name.toLowerCase().replace(/[^a-z]/g,"");if(r==t){e=n;break}}}this.$router.push("/coll/".concat(this.connection,"/").concat(this.database,"/").concat(e.name,"/index"))}}}}),ne=ae,re=Object(h["a"])(ne,ee,te,!1,null,"478b2f18",null),se=re.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-auto"},[a("BreadcrumbComponent",{attrs:{connection:e.connection,database:e.database,collection:e.collection,"display-collection":e.displayCollection,action:"Browse"}})],1),a("div",{staticClass:"col-auto my-auto pl-0 ml-auto"},[a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["shift","+"],expression:"['shift', '+']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"#",title:"Insert (+)"},on:{shortkey:function(t){return e.openInsert()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.openInsert()}}},[a("span",{staticClass:"fa fa-plus"})]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["/"],expression:"['/']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{href:"#",title:"Search (/)"},on:{shortkey:function(t){return e.openSearch()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.openSearch()}}},[a("span",{staticClass:"fa fa-search"})]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{href:"#",title:"Reload (r)"},on:{shortkey:function(t){return e.reload()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.reload()}}},[a("span",{staticClass:"fa fa-sync"})]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["shift","?"],expression:"['shift', '?']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{href:"#",title:"Keyboard Shortcuts (?)"},on:{shortkey:function(t){return e.openShortcuts()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.openShortcuts()}}},[a("span",{staticClass:"fa fa-question-circle"})])]),a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"col-auto my-auto",attrs:{title:e.totalRows}},[e._v(" "+e._s(e.displayTotal)+" ")]),a("div",{staticClass:"col-auto my-auto pl-0"},[a("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:e.pageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),a("div",{staticClass:"col-auto my-auto pl-0"},[a("b-pagination",{staticClass:"my-1",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)]),a("b-table",{ref:"bv_table",attrs:{id:"records_table",bordered:"",small:"",items:e.records_fn,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage},scopedSlots:e._u([{key:"cell(_id)",fn:function(t){return[a("div",{staticClass:"id-field",on:{click:t.toggleDetails}},[e._v(e._s(t.item._id))])]}},{key:"row-details",fn:function(t){return[a("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[a("code",{staticClass:"json"},[e._v(e._s(JSON.stringify(t.item,null,2)))])]),a("div",{staticClass:"small"},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.confirmDelete(t.item)}}},[e._v("Delete")])])]}}])}),e.isCollEmpty?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col border p-5 text-center h4"},[e.query_text?a("span",[e._v(" No Records Found ")]):a("span",[e._v(" Empty Collection ")])])])]):e._e(),a("b-modal",{attrs:{id:"insert-modal",title:"Insert Document"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:function(t){return e.insertDoc()}}},[e._v(" Save ")])],1)]},proxy:!0}]),model:{value:e.showInsertModal,callback:function(t){e.showInsertModal=t},expression:"showInsertModal"}},[a("div",[a("b-textarea",{class:{"is-invalid":e.insertError},attrs:{rows:"8",autofocus:""},model:{value:e.insertItem,callback:function(t){e.insertItem=t},expression:"insertItem"}})],1),a("div",{staticClass:"row"},[e.insertError?a("div",{staticClass:"col text-danger"},[e._v(" Invalid JSON. ")]):e._e(),a("div",{staticClass:"col text-right"},[a("a",{staticClass:"small my-2",attrs:{href:"https://docs.mongodb.com/manual/reference/mongodb-extended-json/#example",target:"_blank"}},[e._v(" EJSON Format "),a("i",{staticClass:"fa fa-external-link-alt"})])])])]),a("b-modal",{attrs:{id:"search-modal",title:"Search"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:function(t){return e.applySearch()}}},[e._v(" Search ")]),a("b-button",{staticClass:"mr-2 float-right",attrs:{variant:"secondary",size:"sm"},on:{click:function(t){return e.resetSearch()}}},[e._v(" Reset ")]),a("b-button",{staticClass:"mr-2 float-right",attrs:{variant:"danger",size:"sm"},on:{click:function(t){return e.deleteRecords()}}},[e._v(" Delete ")])],1)]},proxy:!0}]),model:{value:e.showSearchModal,callback:function(t){e.showSearchModal=t},expression:"showSearchModal"}},[a("b-tabs",{attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Query",active:""}},[a("div",[a("b-textarea",{class:{"is-invalid":e.searchError},attrs:{rows:"8",autofocus:""},model:{value:e.query_text,callback:function(t){e.query_text=t},expression:"query_text"}})],1),a("div",{staticClass:"row"},[e.insertError?a("div",{staticClass:"col text-danger"},[e._v(" Invalid JSON. ")]):e._e(),a("div",{staticClass:"col text-right"},[a("a",{staticClass:"small my-2",attrs:{href:"https://docs.mongodb.com/manual/reference/mongodb-extended-json/#example",target:"_blank"}},[e._v(" EJSON Format "),a("i",{staticClass:"fa fa-external-link-alt"})])])])])],1)],1),a("b-modal",{attrs:{id:"shortcuts-modal",title:"Keyboard Shortcuts","ok-only":""},model:{value:e.showShortcutsModal,callback:function(t){e.showShortcutsModal=t},expression:"showShortcutsModal"}},[a("table",{staticClass:"table table-bordered"},[a("tbody",[a("tr",[a("td",[e._v("/")]),a("td",[e._v("Search")])]),a("tr",[a("td",[e._v("+")]),a("td",[e._v("Insert")])]),a("tr",[a("td",[e._v("r")]),a("td",[e._v("Reload")])]),a("tr",[a("td",[e._v("?")]),a("td",[e._v("Keyboard Shortcuts")])])])])]),a("b-modal",{attrs:{id:"clear-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Clear Collection"},on:{ok:function(t){return e.clearCollection()}}},[a("p",[e._v(" This will drop the collection and recreate it with same indexes. "),a("br"),e._v(" You will lose all data in this collection. ")]),a("p",[e._v("Proceed?")])]),a("b-modal",{attrs:{id:"drop-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Drop Collection"},on:{ok:function(t){return e.dropCollection()}}},[a("p",[e._v(" This will drop the collection. "),a("br"),e._v(" You will lose all data and indexes in this collection. ")]),a("p",[e._v("Proceed?")])]),a("b-modal",{attrs:{id:"delete-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Delete"},on:{ok:function(t){return e.deleteRecord()}},model:{value:e.showDeleteModal,callback:function(t){e.showDeleteModal=t},expression:"showDeleteModal"}},[a("p",[e._v(" This will delete below record. ")]),a("p",[e._v("Proceed?")]),a("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[a("code",{staticClass:"json"},[e._v(e._s(JSON.stringify(e.deleteItem,null,2)))])])])],1)},ie=[],ce=(a("d81d"),a("4e22")),le=a.n(ce),ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-button",{attrs:{variant:"link",to:"/db/"+e.connection+"/"+e.database+"/index"}},[e._v(e._s(e.database))]),a("span",{staticClass:"text-muted"},[e._v("/")]),a("b-button",{attrs:{variant:"link",to:"/coll/"+e.connection+"/"+e.database+"/"+e.collection+"/index"}},[e._v(e._s(e.displayCollection))]),a("span",{staticClass:"text-muted"},[e._v("/")]),a("b-dropdown",{staticClass:"text-muted",attrs:{id:"dropdown-dropright",dropright:"",text:e.action,variant:"muted"}},[a("b-dropdown-item",{attrs:{href:"#"}},[e._v("Home")]),a("b-dropdown-item",{attrs:{href:"#",to:"/coll/"+e.connection+"/"+e.database+"/"+e.collection+"/indexes"}},[e._v(" Indexes ")]),a("b-dropdown-item",{attrs:{href:"#",to:"/coll/"+e.connection+"/"+e.database+"/"+e.collection+"/index"}},[e._v(" Browse ")]),a("b-dropdown-item",{attrs:{href:"#",to:"/coll/"+e.connection+"/"+e.database+"/"+e.collection+"/schema"}},[e._v(" Schema ")]),a("b-dropdown-item",{attrs:{href:"#",to:"/coll/"+e.connection+"/"+e.database+"/"+e.collection+"/filter"}},[e._v(" Filter ")]),a("b-dropdown-item",{attrs:{href:"#",to:"/coll/"+e.connection+"/"+e.database+"/"+e.collection+"/fields"}},[e._v(" Fields ")]),a("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.clear-confirmation-modal",modifiers:{"clear-confirmation-modal":!0}}],attrs:{href:"#",variant:"danger"}},[e._v("Clear")]),a("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.drop-confirmation-modal",modifiers:{"drop-confirmation-modal":!0}}],attrs:{href:"#",variant:"danger"}},[e._v("Drop")])],1)],1)},de=[],me={props:["connection","database","collection","displayCollection","action"]},pe=me,ve=Object(h["a"])(pe,ue,de,!1,null,null,null),fe=ve.exports,he={components:{BreadcrumbComponent:fe},data:function(){return{connection:"",database:"",collection:"",showInsertModal:!1,showSearchModal:!1,showShortcutsModal:!1,showDeleteModal:!1,isCollEmpty:!1,displayCollection:"",search_text:"",query_text:"",deleteItem:null,insertItem:null,insertError:!1,searchError:!1,fields:null,perPage:20,totalRows:2e3,displayTotal:"100+",currentPage:1,pageOptions:[5,10,20,50,100,500,1e3,2e3]}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connection=e.$route.params.connection,e.database=e.$route.params.database,e.collection=e.$route.params.collection,a=z.get("collection_display"),e.displayCollection="name"==a?e.collection:N.a.upperFirst(N.a.camelCase(e.collection)),n=e.collection+":query",e.query=z.get(n),e.query?e.query_text=JSON.stringify(e.query,null,4):e.query={},n=e.collection+":fields",e.fields=z.get(n);case 10:case"end":return t.stop()}}),t)})))()},watch:{totalRows:function(e){this.displayTotal=e>1e3&&e<1e6?Math.floor(e/1e3)+"k":e>1e6?Math.floor(e/1e6)+"m":""+e}},methods:{reload:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$root.$emit("bv::refresh::table","records_table");case 1:case"end":return t.stop()}}),t)})))()},records_fn:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.query=t.query,a.next=3,q.records(t.connection,t.database,t.collection,e);case 3:return n=a.sent,r=n.records,t.totalRows=n.count,t.isCollEmpty=!r.length,n.schema&&n.schema.fields&&!t.fields&&(t.fields=t.map_fields(n.schema.fields)),a.abrupt("return",r);case 9:case"end":return a.stop()}}),a)})))()},date_time_formatter:function(e){var t=le()(e).format("MMM DD, YYYY HH:mm:ss");return t},unix_date_time_formatter:function(e){var t=le.a.unix(e).format("MMM DD, YYYY HH:mm:ss");return t},map_fields:function(e){return e.map((function(e){var t,a=e,n=e;return"_id"==a&&(t=!0),{key:a,label:n,sortable:t}}))},clearCollection:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.clear(e.connection,e.database,e.collection);case 2:e.reload();case 3:case"end":return t.stop()}}),t)})))()},dropCollection:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.drop(e.connection,e.database,e.collection);case 2:e.$router.push("/db/".concat(e.connection,"/").concat(e.database,"/index"));case 3:case"end":return t.stop()}}),t)})))()},confirmDelete:function(e){this.deleteItem=e,this.showDeleteModal=!0},deleteRecord:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={_id:{$oid:e.deleteItem._id}},t.next=3,q.deleteRecords(e.connection,e.database,e.collection,a);case 3:e.reload();case 4:case"end":return t.stop()}}),t)})))()},openInsert:function(){this.showInsertModal=!0},insertDoc:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.insertError=!1,t.prev=1,a=JSON.parse(e.insertItem),t.next=9;break;case 5:return t.prev=5,t.t0=t["catch"](1),e.insertError=!0,t.abrupt("return");case 9:return t.next=11,q.insertDoc(e.connection,e.database,e.collection,a);case 11:e.showInsertModal=!1,e.reload();case 13:case"end":return t.stop()}}),t,null,[[1,5]])})))()},openSearch:function(){this.showSearchModal=!0},openShortcuts:function(){this.showShortcutsModal=!0},applySearch:function(){var e;if(this.searchError=!1,this.query_text&&this.query_text.trim())try{e=JSON.parse(this.query_text)}catch(t){return void(this.searchError=!0)}e||(e={}),this.showSearchModal=!1,this.query=e,this.$root.$emit("bv::refresh::table","records_table")},resetSearch:function(){this.query_text="",this.query={},this.$root.$emit("bv::refresh::table","records_table"),this.searchError=!1,this.showSearchModal=!1},deleteRecords:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.showSearchModal=!1,e.query_text&&e.query_text.trim())try{a=JSON.parse(e.query_text)}catch(r){}return a||(a={}),t.next=5,q.deleteRecords(e.connection,e.database,e.collection,a);case 5:n=t.sent,console.log("delete result",n),e.$bvToast.toast("".concat(n.count," records deleted"),{title:"Success",variant:"success",solid:!0,autoHideDelay:5e3,appendToast:!0}),e.query=null,e.$root.$emit("bv::refresh::table","records_table");case 10:case"end":return t.stop()}}),t)})))()}}},be=he,_e=(a("dca6"),Object(h["a"])(be,oe,ie,!1,null,null,null)),ge=_e.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-auto"},[a("BreadcrumbComponent",{attrs:{connection:e.connection,database:e.database,collection:e.collection,"display-collection":e.displayCollection,action:"Schema"}})],1),a("div",{staticClass:"col-auto my-auto pl-0 ml-auto"},[a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"#",title:"Reload (r)"},on:{shortkey:function(t){return e.reload()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.reload()}}},[a("span",{staticClass:"fa fa-sync"})]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-modal",rawName:"v-b-modal.rebuild-confirmation-modal",modifiers:{"rebuild-confirmation-modal":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-danger ml-2",attrs:{href:"#",title:"Rebuild"},on:{shortkey:function(t){return e.rebuildSchema()}}},[a("span",{staticClass:"fa fa-undo"})])])]),e.isSchemaEmpty?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col border p-5 text-center"},[a("div",{staticClass:"h4"},[e._v(" No Schema ")]),a("div",[a("a",{staticClass:"btn btn-primary",on:{click:e.rebuildSchema}},[e._v(" Build Schema ")])])])])]):a("div",[a("div",{staticClass:"container table-container"},e._l(this.fields,(function(t){return a("div",{key:t._id,staticClass:"row",class:"field-type-"+t.type},[a("div",{class:["col","field-depth-"+t.depth]},[e._v(" "+e._s(t.path)+" ")]),a("div",{staticClass:"col"},[e._v(" "+e._s(t.type)+" "),t.sub_type?a("span",[e._v("("+e._s(t.sub_type)+")")]):e._e(),t.probability?a("span",{staticClass:"small text-muted"},[e._v("("+e._s(t.probability)+"%)")]):e._e()])])})),0)]),a("b-modal",{attrs:{id:"rebuild-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Rebuild"},on:{ok:function(t){return e.rebuildSchema()}}},[a("p",[e._v(" This will delete exising schema changes, if any. "),a("br"),e._v(" It will rebuild the schema based on latest data. ")]),a("p",[e._v("Proceed?")])])],1)},ye=[],xe={components:{BreadcrumbComponent:fe},data:function(){return{connection:"",database:"",collection:"",displayCollection:"",isSchemaEmpty:!1,fields:[]}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,e.database=e.$route.params.database,e.collection=e.$route.params.collection,a=z.get("collection_display"),e.displayCollection="name"==a?e.collection:N.a.upperFirst(N.a.camelCase(e.collection)),t.next=7,e.reload();case 7:case"end":return t.stop()}}),t)})))()},methods:{reload:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.loadSchema(e.connection,e.database,e.collection);case 2:e.fields=t.sent,e.fields&&e.fields.length?e.isSchemaEmpty=!1:e.isSchemaEmpty=!0;case 4:case"end":return t.stop()}}),t)})))()},rebuildSchema:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.rebuildSchema(e.connection,e.database,e.collection);case 2:return t.next=4,e.reload();case 4:case"end":return t.stop()}}),t)})))()}}},Ce=xe,ke=(a("97a5"),Object(h["a"])(Ce,we,ye,!1,null,"3135638d",null)),je=ke.exports,Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-auto"},[a("BreadcrumbComponent",{attrs:{connection:e.connection,database:e.database,collection:e.collection,"display-collection":e.displayCollection,action:"Indexes"}})],1),a("div",{staticClass:"col-auto my-auto pl-0 ml-auto"},[a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["shift","+"],expression:"[ 'shift', '+']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"#",title:"Create Index (+)"},on:{shortkey:function(t){return e.showCreate()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.showCreate()}}},[a("span",{staticClass:"fa fa-plus"})]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{href:"#",title:"Reload (r)"},on:{shortkey:function(t){return e.reload()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.reload()}}},[a("span",{staticClass:"fa fa-sync"})])])]),e.isEmpty?a("div",[e._m(0)]):a("div",[a("div",{staticClass:"container table-container mt-3"},e._l(this.indexes,(function(t){return a("div",{key:t.name,staticClass:"row py-2"},[a("div",{staticClass:"col text-monospace"},[e._v(" "+e._s(JSON.stringify(t.key))+" ")]),a("div",{staticClass:"col text-center"},["_id_"!=t.name?a("span",{staticClass:"text-warning fa fa-trash",on:{click:function(a){return e.deleteConfirmation(t)}}}):e._e()])])})),0)]),a("b-modal",{attrs:{id:"delete-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Delete"},on:{ok:function(t){return e.deleteIndex()}},model:{value:e.showDeleteModal,callback:function(t){e.showDeleteModal=t},expression:"showDeleteModal"}},[a("div",[e._v("This will delete below index.")]),a("div",{staticClass:"text-monospace my-2"},[e._v(" "+e._s(this.deleteItem?JSON.stringify(this.deleteItem.key):"")+" ")]),a("div",[e._v("Proceed?")])])],1)},Re=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col border p-5 text-center"},[a("div",{staticClass:"h4"},[e._v(" No Indexes Found ")])])])}],Oe={components:{BreadcrumbComponent:fe},data:function(){return{connection:"",database:"",collection:"",displayCollection:"",isEmpty:!1,indexes:[],deleteItem:null,showDeleteModal:!1}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,e.database=e.$route.params.database,e.collection=e.$route.params.collection,a=z.get("collection_display"),e.displayCollection="name"==a?e.collection:N.a.upperFirst(N.a.camelCase(e.collection)),t.next=7,e.reload();case 7:case"end":return t.stop()}}),t)})))()},methods:{reload:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.getIndexes(e.connection,e.database,e.collection);case 2:e.indexes=t.sent,e.indexes&&e.indexes.length?e.isEmpty=!1:e.isEmpty=!0;case 4:case"end":return t.stop()}}),t)})))()},deleteConfirmation:function(e){this.deleteItem=e,this.showDeleteModal=!0},deleteIndex:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.deleteIndex(e.connection,e.database,e.collection,e.deleteItem.name);case 2:e.reload();case 3:case"end":return t.stop()}}),t)})))()}}},Ie=Oe,$e=Object(h["a"])(Ie,Se,Re,!1,null,null,null),De=$e.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-auto"},[a("BreadcrumbComponent",{attrs:{connection:e.connection,database:e.database,collection:e.collection,"display-collection":e.displayCollection,action:"Filter"}})],1),a("div",{staticClass:"col-auto my-auto pl-0 ml-auto"},[a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"#",title:"Reload (r)"},on:{shortkey:function(t){return e.reload()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.reload()}}},[a("span",{staticClass:"fa fa-sync"})]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-modal",rawName:"v-b-modal.rebuild-confirmation-modal",modifiers:{"rebuild-confirmation-modal":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-danger ml-2",attrs:{href:"#",title:"Rebuild"},on:{shortkey:function(t){return e.rebuildSchema()}}},[a("span",{staticClass:"fa fa-undo"})])])]),e.isSchemaEmpty?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col border p-5 text-center"},[a("div",{staticClass:"h4"},[e._v(" No Schema ")]),a("div",[a("a",{staticClass:"btn btn-primary",on:{click:e.rebuildSchema}},[e._v(" Build Schema ")])])])])]):a("div",[a("div",{staticClass:"container"},[e._m(0),a("form",{on:{submit:function(t){return t.preventDefault(),e.addItem(t)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-5"},[a("b-form-select",{attrs:{placeholder:"Field",autofocus:"",options:e.field_options},model:{value:e.editItem.path,callback:function(t){e.$set(e.editItem,"path",t)},expression:"editItem.path"}})],1),a("div",{staticClass:"col-2"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.editItem.operator,expression:"editItem.operator"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editItem,"operator",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"$eq"}},[e._v("=")]),a("option",{attrs:{value:"$ne"}},[e._v("!=")]),a("option",{attrs:{value:"$gt"}},[e._v(">")]),a("option",{attrs:{value:"$lt"}},[e._v("<")]),a("option",{attrs:{value:"$regex"}},[e._v("regex(i)")]),a("option",{attrs:{value:"null"}},[e._v("null")]),a("option",{attrs:{value:"not null"}},[e._v("not null")])])]),a("div",{staticClass:"col-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.editItem.value,expression:"editItem.value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.editItem.value},on:{input:function(t){t.target.composing||e.$set(e.editItem,"value",t.target.value)}}})]),a("div",{staticClass:"col-1"},[a("button",{staticClass:"btn btn-light",on:{click:function(t){return t.preventDefault(),e.addItem(t)}}},[e._v("Add")])])])])]),a("div",{staticClass:"container table-container my-3"},e._l(e.items,(function(t,n){return a("div",{key:t.path,staticClass:"row py-1"},[a("div",{staticClass:"col-5"},[e._v(" "+e._s(t.path)+" ")]),a("div",{staticClass:"col-2"},[e._v(" "+e._s(t.operator)+" ")]),a("div",{staticClass:"col-4"},[e._v(" "+e._s(t.value)+" ")]),a("div",{staticClass:"col-1"},[a("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteItem(n)}}},[a("span",{staticClass:"fa fa-times"})])])])})),0)]),e.items.length?a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-primary",on:{click:e.applyFilter}},[e._v(" Apply ")])]),a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-secondary",on:{click:e.reset}},[e._v(" Reset ")])])]):e._e(),e.items.length?a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col"},[a("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.query_display,expression:"query_display"}]},[a("code",{staticClass:"json"},[e._v(e._s(e.query_display))])])])]):e._e(),a("b-modal",{attrs:{id:"rebuild-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Rebuild"},on:{ok:function(t){return e.rebuildSchema()}}},[a("p",[e._v(" This will delete exising schema changes, if any. "),a("br"),e._v(" It will rebuild the schema based on latest data. ")]),a("p",[e._v("Proceed?")])])],1)},Me=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row font-italic"},[a("div",{staticClass:"col-6"},[e._v("Field")]),a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-4"},[e._v("Value")])])}],Ee=a("b85c"),qe={components:{BreadcrumbComponent:fe},data:function(){return{connection:"",database:"",collection:"",displayCollection:"",isSchemaEmpty:!1,editItem:{path:null,operator:"$eq",value:null},fields:[],field_options:[],items:[],query:{},query_display:""}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,e.database=e.$route.params.database,e.collection=e.$route.params.collection,a=z.get("collection_display"),e.displayCollection="name"==a?e.collection:N.a.upperFirst(N.a.camelCase(e.collection)),t.next=7,e.reload();case 7:e.items=z.get(e.collection+":filter")||[];case 8:case"end":return t.stop()}}),t)})))()},methods:{reload:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.loadSchema(e.connection,e.database,e.collection);case 2:e.fields=t.sent,e.fields&&e.fields.length?e.isSchemaEmpty=!1:e.isSchemaEmpty=!0,a=Object(Ee["a"])(e.fields);try{for(a.s();!(n=a.n()).done;)r=n.value,e.field_options.push({value:r.path,text:r.path})}catch(s){a.e(s)}finally{a.f()}case 6:case"end":return t.stop()}}),t)})))()},rebuildSchema:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.rebuildSchema(e.connection,e.database,e.collection);case 2:return t.next=4,e.reload();case 4:case"end":return t.stop()}}),t)})))()},addItem:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.editItem,n=a.path,r=a.operator,s=a.value,n){t.next=3;break}return t.abrupt("return");case 3:o={path:n,operator:r,value:s},e.items.push(o),e.editItem.path=null,e.editItem.value=null,e.updateQuery();case 8:case"end":return t.stop()}}),t)})))()},deleteItem:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.items.splice(e,1),t.updateQuery();case 2:case"end":return a.stop()}}),a)})))()},updateQuery:function(){this.query={};var e,t=Object(Ee["a"])(this.items);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.query[a.path]=this.query[a.path]||{},"null"==a.operator?this.query[a.path]["$eq"]=null:"not null"==a.operator?this.query[a.path]["$ne"]=null:"$regex"==a.operator?(this.query[a.path]["$regex"]=a.value,this.query[a.path]["$options"]="i"):this.query[a.path][a.operator]=a.value}}catch(n){t.e(n)}finally{t.f()}this.query_display=JSON.stringify(this.query,null,4)},applyFilter:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=864e5,n=e.collection+":query",z.set(n,e.query,{ttl:a}),r=e.collection+":filter",z.set(r,e.items,{ttl:a}),e.$router.push("/coll/".concat(e.connection,"/").concat(e.database,"/").concat(e.collection,"/index"));case 6:case"end":return t.stop()}}),t)})))()},reset:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=1e3,n=e.collection+":filter",z.set(n,null,{ttl:a}),r=e.collection+":query",z.set(r,null,{ttl:a}),e.$router.push("/coll/".concat(e.connection,"/").concat(e.database,"/").concat(e.collection,"/index"));case 6:case"end":return t.stop()}}),t)})))()}}},Pe=qe,ze=Object(h["a"])(Pe,Ne,Me,!1,null,null,null),Te=ze.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-auto"},[a("BreadcrumbComponent",{attrs:{connection:e.connection,database:e.database,collection:e.collection,"display-collection":e.displayCollection,action:"Fields"}})],1),a("div",{staticClass:"col-auto my-auto pl-0 ml-auto"},[a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"#",title:"Reload (r)"},on:{shortkey:function(t){return e.reload()},click:function(t){return t.stopPropagation(),t.preventDefault(),e.reload()}}},[a("span",{staticClass:"fa fa-sync"})]),a("a",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["r"],expression:"['r']",modifiers:{once:!0}},{name:"b-modal",rawName:"v-b-modal.rebuild-confirmation-modal",modifiers:{"rebuild-confirmation-modal":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-danger ml-2",attrs:{href:"#",title:"Rebuild"},on:{shortkey:function(t){return e.rebuildSchema()}}},[a("span",{staticClass:"fa fa-undo"})])])]),e.isSchemaEmpty?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col border p-5 text-center"},[a("div",{staticClass:"h4"},[e._v(" No Schema ")]),a("div",[a("a",{staticClass:"btn btn-primary",on:{click:e.rebuildSchema}},[e._v(" Build Schema ")])])])])]):a("div",[a("div",{staticClass:"container"},[e._m(0),a("form",{on:{submit:function(t){return t.preventDefault(),e.addItem(t)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("b-form-select",{attrs:{autofocus:"",options:e.field_options},model:{value:e.editItem.key,callback:function(t){e.$set(e.editItem,"key",t)},expression:"editItem.key"}})],1),a("div",{staticClass:"col-3"},[a("b-form-input",{model:{value:e.editItem.label,callback:function(t){e.$set(e.editItem,"label",t)},expression:"editItem.label"}})],1),a("div",{staticClass:"col-3"},[a("b-form-select",{attrs:{options:e.formatter_options},model:{value:e.editItem.formatter,callback:function(t){e.$set(e.editItem,"formatter",t)},expression:"editItem.formatter"}})],1),a("div",{staticClass:"col-1"},[a("button",{staticClass:"btn btn-light",on:{click:function(t){return t.preventDefault(),e.addItem(t)}}},[e._v("Add")])])])])]),a("div",{staticClass:"container table-container my-3"},[a("draggable",{on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.items,callback:function(t){e.items=t},expression:"items"}},e._l(e.items,(function(t,n){return a("div",{key:t,staticClass:"row py-1"},[a("div",{staticClass:"col-3"},[e._v(" "+e._s(t.key)+" ")]),a("div",{staticClass:"col-3"},[e._v(" "+e._s(t.label)+" ")]),a("div",{staticClass:"col-3"},[e._v(" "+e._s(t.formatter)+" ")]),a("div",{staticClass:"col-1"},[a("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteItem(n)}}},[a("span",{staticClass:"fa fa-times"})])])])})),0)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"row my-3"},[e.items.length?a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-primary",on:{click:e.apply}},[e._v(" Apply ")])]):e._e(),a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-secondary",on:{click:e.reset}},[e._v(" Reset ")])])])])]),a("b-modal",{attrs:{id:"rebuild-confirmation-modal",title:"Confirmation","ok-variant":"danger","ok-title":"Rebuild"},on:{ok:function(t){return e.rebuildSchema()}}},[a("p",[e._v(" This will delete exising schema changes, if any. "),a("br"),e._v(" It will rebuild the schema based on latest data. ")]),a("p",[e._v("Proceed?")])])],1)},Ae=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row font-italic"},[a("div",{staticClass:"col-3"},[e._v("Field")]),a("div",{staticClass:"col-3"},[e._v("Label")]),a("div",{staticClass:"col-3"},[e._v("Formatter")]),a("div",{staticClass:"col-3"})])}],Fe=a("43a1"),Je=a.n(Fe),Le={components:{BreadcrumbComponent:fe,draggable:Je.a},data:function(){return{connection:"",database:"",collection:"",displayCollection:"",isSchemaEmpty:!1,editItem:{path:null,operator:"$eq",value:null},fields:[],field_options:[],formatter_options:[],items:[]}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connection=e.$route.params.connection,e.database=e.$route.params.database,e.collection=e.$route.params.collection,a=z.get("collection_display"),e.displayCollection="name"==a?e.collection:N.a.upperFirst(N.a.camelCase(e.collection)),e.formatter_options=[{value:"unix_date_time_formatter",text:"Date Time (Unix Timestamp)"},{value:"date_time_formatter",text:"Date Time (Milliseconds)"}],t.next=8,e.reload();case 8:e.items=z.get(e.collection+":fields")||[];case 9:case"end":return t.stop()}}),t)})))()},methods:{reload:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.loadSchema(e.connection,e.database,e.collection);case 2:e.fields=t.sent,e.fields&&e.fields.length?e.isSchemaEmpty=!1:e.isSchemaEmpty=!0,a=Object(Ee["a"])(e.fields);try{for(a.s();!(n=a.n()).done;)r=n.value,e.field_options.push({value:r.path,text:r.path})}catch(s){a.e(s)}finally{a.f()}case 6:case"end":return t.stop()}}),t)})))()},rebuildSchema:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.rebuildSchema(e.connection,e.database,e.collection);case 2:return t.next=4,e.reload();case 4:case"end":return t.stop()}}),t)})))()},addItem:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.editItem,n=a.key,r=a.label,s=a.formatter,n){t.next=3;break}return t.abrupt("return");case 3:o=!1,"_id"==n&&(o=!0),i={key:n,label:r,formatter:s,sortable:o},e.items.push(i),e.editItem.key=null;case 8:case"end":return t.stop()}}),t)})))()},deleteItem:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.items.splice(e,1);case 1:case"end":return a.stop()}}),a)})))()},apply:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=864e5,n=e.collection+":fields",z.set(n,e.items,{ttl:a}),e.$router.push("/coll/".concat(e.connection,"/").concat(e.database,"/").concat(e.collection,"/index"));case 4:case"end":return t.stop()}}),t)})))()},reset:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=864e5,n=e.collection+":fields",z.set(n,null,{ttl:a}),e.$router.push("/coll/".concat(e.connection,"/").concat(e.database,"/").concat(e.collection,"/index"));case 4:case"end":return t.stop()}}),t)})))()}}},Ue=Le,Ye=Object(h["a"])(Ue,Be,Ae,!1,null,null,null),He=Ye.exports,Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("div",{staticClass:"container table-container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e._v(" Collection Display ")]),a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.collection_display,expression:"collection_display"}],attrs:{type:"radio",value:"name"},domProps:{checked:e._q(e.collection_display,"name")},on:{change:function(t){e.collection_display="name"}}}),e._v(" "),a("label",{attrs:{for:"one"}},[e._v("By Name")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.collection_display,expression:"collection_display"}],attrs:{type:"radio",value:"model_name"},domProps:{checked:e._q(e.collection_display,"model_name")},on:{change:function(t){e.collection_display="model_name"}}}),e._v(" "),a("label",{attrs:{for:"two"}},[e._v("By Model Name")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e._v(" Records Display Default (TBD) ")]),a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.records_display_default,expression:"records_display_default"}],attrs:{type:"radio",value:"table"},domProps:{checked:e._q(e.records_display_default,"table")},on:{change:function(t){e.records_display_default="table"}}}),e._v(" "),a("label",{attrs:{for:"one"}},[e._v("Tabular")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.records_display_default,expression:"records_display_default"}],attrs:{type:"radio",value:"json"},domProps:{checked:e._q(e.records_display_default,"json")},on:{change:function(t){e.records_display_default="json"}}}),e._v(" "),a("label",{attrs:{for:"two"}},[e._v("JSON")])])])]),a("div",{staticClass:"container mt-3"},[a("div",{staticClass:"row justify-content-end"},[a("div",{staticClass:"col-auto"},[a("b-button",{attrs:{variant:"primary"},on:{click:e.saveClientSettings}},[e._v("Save")])],1)])]),e._m(1),a("div",{staticClass:"container table-container"},[a("div",{staticClass:"row"},[e._m(2),a("div",{staticClass:"col p-1"},[a("b-form-input",{attrs:{readonly:""},model:{value:e.serverSettings.default_connection,callback:function(t){e.$set(e.serverSettings,"default_connection",t)},expression:"serverSettings.default_connection"}})],1)]),a("div",{staticClass:"row"},[e._m(3),a("div",{staticClass:"col p-1"},[a("b-form-input",{attrs:{readonly:""},model:{value:e.serverSettings.mongozap_database,callback:function(t){e.$set(e.serverSettings,"mongozap_database",t)},expression:"serverSettings.mongozap_database"}})],1)])])])},Qe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col h4"},[e._v(" Client Settings ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col h4"},[e._v(" Server Settings ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col"},[e._v(" Default Connection "),a("div",{staticClass:"small"},[e._v("process.env.DEFAULT_DATABASE "),a("br"),e._v(" (see .env file)")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col"},[e._v(" Mongozap Database "),a("div",{staticClass:"small"},[e._v("process.env.MONGOZAP_DATABASE "),a("br"),e._v(" (see .env file)")])])}],Ve={data:function(){return{collection_display:"",records_display_default:"",serverSettings:{}}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.collection_display=z.get("collection_display")||"name",e.records_display_default=z.get("records_display_default")||"table",t.next=4,e.loadServerSettings();case 4:case"end":return t.stop()}}),t)})))()},methods:{saveClientSettings:function(){z.set("collection_display",this.collection_display),z.set("records_display_default",this.records_display_default)},loadServerSettings:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.getServerSettings();case 2:e.serverSettings=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}},Ze=Ve,Ge=Object(h["a"])(Ze,Ke,Qe,!1,null,null,null),We=Ge.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e.error?a("div",{staticClass:"container"},[a("div",{staticClass:"row my-2"},[a("div",{staticClass:"col text-danger"},[e._v(" "+e._s(e.error)+" ")])])]):e._e(),a("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("div",{staticClass:"container table-container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e._v(" Username ")]),a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-input",attrs:{type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e._v(" Password ")]),a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-input",attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])])]),a("div",{staticClass:"container mt-3"},[a("div",{staticClass:"row justify-content-end"},[a("div",{staticClass:"col-auto"},[a("b-button",{attrs:{variant:"primary",type:"submit"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Login")])],1)])])])])},et=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col h4"},[e._v(" Login ")])])])}],tt={data:function(){return{username:"",password:"",error:"",isAuthenticated:!1}},created:function(){return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{login:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return{username:e.username},t.next=3,q.login(e.username,e.password);case 3:a=t.sent,"success"==a.status&&a.user?(z.set("authUser",a.user,{ttl:2592e6}),window.location="/login"):"error"==a.status?e.error="Username / Password Invalid":e.error="Server/Network Error: Unable to Login";case 5:case"end":return t.stop()}}),t)})))()}}},at=tt,nt=(a("b6cf"),Object(h["a"])(at,Xe,et,!1,null,"22543640",null)),rt=nt.exports;n["default"].use(k["a"],{prefix:"mzp_"});var st=n["default"].$storage.get("authUser");n["default"].use(C["a"]);var ot=new C["a"]({routes:[{path:"/",component:F},{path:"/db/:connection/list",component:K},{path:"/db/:connection/:database/home",component:X},{path:"/db/:connection/:database/index",component:se},{path:"/coll/:connection/:database/:collection/index",component:ge},{path:"/coll/:connection/:database/:collection/schema",component:je},{path:"/coll/:connection/:database/:collection/filter",component:Te},{path:"/coll/:connection/:database/:collection/fields",component:He},{path:"/coll/:connection/:database/:collection/indexes",component:De},{path:"/settings",component:We},{path:"/login",component:rt,name:"login"}]});ot.beforeEach((function(e,t,a){"login"===e.name||st&&st.username?a():a({name:"login"})}));var it=ot;a("560b"),a("a821"),a("a3b2");n["default"].config.productionTip=!1,n["default"].use(r["a"]),n["default"].use(o.a,{prevent:["input","textarea"]}),n["default"].use(c.a),new n["default"]({router:it,render:function(e){return e(x)}}).$mount("#app")},"770a":function(e,t,a){e.exports=a.p+"img/mongozap-logo.9a71a4c7.png"},"97a5":function(e,t,a){"use strict";var n=a("e657"),r=a.n(n);r.a},a3b2:function(e,t,a){},b6cf:function(e,t,a){"use strict";var n=a("c045"),r=a.n(n);r.a},c045:function(e,t,a){},c0cc:function(e,t,a){"use strict";var n=a("d39e"),r=a.n(n);r.a},d39e:function(e,t,a){},dca6:function(e,t,a){"use strict";var n=a("49dc"),r=a.n(n);r.a},e02c:function(e,t,a){e.exports=a.p+"img/github-logo.ef7a02b6.png"},e657:function(e,t,a){}});
//# sourceMappingURL=app.d842edd1.js.map